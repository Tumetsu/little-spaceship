/** Cooked with Flambe, https://getflambe.com */
'use strict';(function(){function l(a,b){function c(){}c.prototype=a;var d=new c,e;for(e in b)d[e]=b[e];b.toString!==Object.prototype.toString&&(d.toString=b.toString);return d}function lb(a){return a instanceof Array?function(){return u.iter(a)}:"function"==typeof a.iterator?U(a,a.iterator):a.iterator}function U(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=Xb++);var c;null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__];null==c&&(c=function(){return c.method.apply(c.scope,
arguments)},c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c);return c}var i=function(){return B.__string_rec(this,"")},W=function(a,b){b=b.split("u").join("");this.r=RegExp(a,b)};W.__name__=!0;W.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw"EReg::matched";},matchedPos:function(){if(null==this.r.m)throw"No string matched";return{pos:this.r.m.index,
len:this.r.m[0].length}},__class__:W};var u=function(){};u.__name__=!0;u.cca=function(a,b){var c=a.charCodeAt(b);return c!=c?void 0:c};u.substr=function(a,b,c){if(null!=b&&0!=b&&null!=c&&0>c)return"";null==c&&(c=a.length);0>b?(b=a.length+b,0>b&&(b=0)):0>c&&(c=a.length+c-b);return a.substr(b,c)};u.remove=function(a,b){var c=a.indexOf(b);if(-1==c)return!1;a.splice(c,1);return!0};u.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};
var fa=function(){};fa.__name__=!0;fa.array=function(a){for(var b=[],a=lb(a)();a.hasNext();){var c=a.next();b.push(c)}return b};fa.exists=function(a,b){for(var c=lb(a)();c.hasNext();){var d=c.next();if(b(d))return!0}return!1};fa.count=function(a,b){var c=0;if(null==b)for(var d=lb(a)();d.hasNext();)d.next(),c++;else for(d=lb(a)();d.hasNext();){var e=d.next();b(e)&&c++}return c};var Da=function(){this.length=0};Da.__name__=!0;Da.prototype={push:function(a){this.h=a=[a,this.h];null==this.q&&(this.q=
a);this.length++},iterator:function(){return{h:this.h,hasNext:function(){return null!=this.h},next:function(){if(null==this.h)return null;var a=this.h[0];this.h=this.h[1];return a}}},__class__:Da};var Ib=function(){};Ib.__name__=!0;Math.__name__=!0;var pa=function(){};pa.__name__=!0;pa.field=function(a,b){try{return a[b]}catch(c){return null}};var H=function(){};H.__name__=!0;H.is=function(a,b){return B.__instanceof(a,b)};H.string=function(a){return B.__string_rec(a,"")};H["int"]=function(a){return a|
0};H.parseInt=function(a){var b=parseInt(a,10);if(0==b&&(120==u.cca(a,1)||88==u.cca(a,1)))b=parseInt(a);return isNaN(b)?null:b};var mb=function(){};mb.__name__=!0;mb.startsWith=function(a,b){return a.length>=b.length&&u.substr(a,0,b.length)==b};var R=function(){};R.__name__=!0;R.prototype={__class__:R};var q=function(){};q.__name__=!0;q.__interfaces__=[R];q.prototype={onAdded:function(){},onRemoved:function(){},onUpdate:function(){},dispose:function(){null!=this.owner&&this.owner.remove(this)},get_name:function(){return null},
init:function(a,b){this.owner=a;this.next=b},__class__:q};var Ea=function(){this._disposables=[]};Ea.__name__=!0;Ea.__super__=q;Ea.prototype=l(q.prototype,{get_name:function(){return"Disposer_9"},add:function(a){this._disposables.push(a);return this},onRemoved:function(){this.freeDisposables()},dispose:function(){q.prototype.dispose.call(this);this.freeDisposables()},freeDisposables:function(){var a=this._disposables;this._disposables=[];for(var b=0;b<a.length;){var c=a[b];++b;c.dispose()}},__class__:Ea});
var D=function(){this.parent=this.firstChild=this.next=this.firstComponent=null;this._compMap={}};D.__name__=!0;D.__interfaces__=[R];D.prototype={add:function(a){null!=a.owner&&a.owner.remove(a);var b=a.get_name(),c=this._compMap[b];null!=c&&this.remove(c);this._compMap[b]=a;b=null;for(c=this.firstComponent;null!=c;)b=c,c=c.next;null!=b?b.next=a:this.firstComponent=a;a.init(this,null);a.onAdded();return this},remove:function(a){for(var b=null,c=this.firstComponent;null!=c;){var d=c.next;if(c==a)return null==
b?this.firstComponent=d:b.init(this,d),delete this._compMap[c.get_name()],c.onRemoved(),c.init(null,null),!0;b=c;c=d}return!1},addChild:function(a,b){null==b&&(b=!0);null!=a.parent&&a.parent.removeChild(a);a.parent=this;if(b){for(var c=null,d=this.firstChild;null!=d;)c=d,d=d.next;null!=c?c.next=a:this.firstChild=a}else a.next=this.firstChild,this.firstChild=a;return this},removeChild:function(a){for(var b=null,c=this.firstChild;null!=c;){var d=c.next;if(c==a){null==b?this.firstChild=d:b.next=d;c.parent=
null;c.next=null;break}b=c;c=d}},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},dispose:function(){for(null!=this.parent&&this.parent.removeChild(this);null!=this.firstComponent;)this.firstComponent.dispose();this.disposeChildren()},__class__:D};var Jb=function(){};Jb.__name__=!0;var nb=function(){};nb.__name__=!0;nb.prototype={__class__:nb};var ga=function(){};ga.__name__=!0;ga.__interfaces__=[nb];ga.prototype={init:function(){var a=this;j.fixAndroidMath();var b=
null;try{b=window.flambe.canvas}catch(c){}b.setAttribute("tabindex","0");b.style.outlineStyle="none";b.style.webkitTapHighlightColor="transparent";b.setAttribute("moz-opaque","true");this._stage=new ha(b);this._pointer=new z;this._mouse=new Fa(this._pointer,b);this._renderer=this.createRenderer(b);this.mainLoop=new ia;this.musicPlaying=!1;this._canvas=b;this._container=b.parentElement;this._container.style.overflow="hidden";this._container.style.position="relative";this._container.style.msTouchAction=
"none";var d=0,e=function(c){if(!(1E3>c.timeStamp-d)){var e=b.getBoundingClientRect(),f=a.getX(c,e),e=a.getY(c,e);switch(c.type){case "mousedown":c.target==b&&(c.preventDefault(),a._mouse.submitDown(f,e,c.button),b.focus());break;case "mousemove":a._mouse.submitMove(f,e);break;case "mouseup":a._mouse.submitUp(f,e,c.button);break;case "mousewheel":case "DOMMouseScroll":a._mouse.submitScroll(f,e,"mousewheel"==c.type?c.wheelDelta/40:-c.detail)&&c.preventDefault()}}};window.addEventListener("mousedown",
e,!1);window.addEventListener("mousemove",e,!1);window.addEventListener("mouseup",e,!1);b.addEventListener("mousewheel",e,!1);b.addEventListener("DOMMouseScroll",e,!1);b.addEventListener("contextmenu",function(a){a.preventDefault()},!1);var f="undefined"!=typeof window.ontouchstart,e="msMaxTouchPoints"in window.navigator&&1<window.navigator.msMaxTouchPoints;if(f||e){var h=new Ga(this._pointer,f?4:window.navigator.msMaxTouchPoints);this._touch=h;e=function(b){var c;c=f?b.changedTouches:[b];var e=b.target.getBoundingClientRect();
d=b.timeStamp;switch(b.type){case "touchstart":case "MSPointerDown":case "pointerdown":b.preventDefault();j.SHOULD_HIDE_MOBILE_BROWSER&&j.hideMobileBrowser();for(b=0;b<c.length;){var g=c[b];++b;var ja=a.getX(g,e),o=a.getY(g,e);h.submitDown((f?g.identifier:g.pointerId)|0,ja,o)}break;case "touchmove":case "MSPointerMove":case "pointermove":b.preventDefault();for(b=0;b<c.length;)g=c[b],++b,ja=a.getX(g,e),o=a.getY(g,e),h.submitMove((f?g.identifier:g.pointerId)|0,ja,o);break;case "touchend":case "touchcancel":case "MSPointerUp":case "pointerup":for(b=
0;b<c.length;)g=c[b],++b,ja=a.getX(g,e),o=a.getY(g,e),h.submitUp((f?g.identifier:g.pointerId)|0,ja,o)}};f?(b.addEventListener("touchstart",e,!1),b.addEventListener("touchmove",e,!1),b.addEventListener("touchend",e,!1),b.addEventListener("touchcancel",e,!1)):(b.addEventListener("MSPointerDown",e,!1),b.addEventListener("MSPointerMove",e,!1),b.addEventListener("MSPointerUp",e,!1))}else this._touch=new Ha;var g=window.onerror;window.onerror=function(a,b,c){k.uncaughtError.emit(a);return null!=g?g(a,b,
c):!1};var p=j.loadExtension("hidden",window.document);null!=p.value?(e=function(){k.hidden.set__(pa.field(window.document,p.field))},e(null),window.document.addEventListener(p.prefix+"visibilitychange",e,!1)):(e=function(a){k.hidden.set__("pagehide"==a.type)},window.addEventListener("pageshow",e,!1),window.addEventListener("pagehide",e,!1));k.hidden.get_changed().connect(function(b){b||(a._skipFrame=!0)});this._skipFrame=!1;this._lastUpdate=Date.now();var o=j.loadExtension("requestAnimationFrame").value;
if(null!=o){var i=window.performance,l=null!=i&&j.polyfill("now",i);l?this._lastUpdate=i.now():null;var m=null,m=function(c){a.update(l?i.now():c);o(m,b)};o(m,b)}else window.setInterval(function(){a.update(Date.now())},16);qa.info("Initialized HTML platform",["renderer",this._renderer.get_type()])},loadAssetPack:function(a){return(new n(this,a)).promise},getStage:function(){return this._stage},update:function(a){var b=(a-this._lastUpdate)/1E3;this._lastUpdate=a;k.hidden._value||(this._skipFrame?this._skipFrame=
!1:(this.mainLoop.update(b),this.mainLoop.render(this._renderer)))},getPointer:function(){return this._pointer},getRenderer:function(){return this._renderer},getX:function(a,b){return(a.clientX-b.left)*this._stage.get_width()/b.width},getY:function(a,b){return(a.clientY-b.top)*this._stage.get_height()/b.height},createRenderer:function(a){try{var b=Kb.getContextWebGL(a,{alpha:!1,depth:!1,failIfMajorPerformanceCaveat:!0});if(null!=b)if(j.detectSlowDriver(b))null;else return new Ia(this._stage,b)}catch(c){}return new ka(a)},
__class__:ga};var I=function(a,b){this._value=a;this._changed=null!=b?new ra(b):null};I.__name__=!0;I.prototype={watch:function(a){a(this._value,this._value);return this.get_changed().connect(a)},set__:function(a){var b=this._value;a!=b&&(this._value=a,null!=this._changed&&this._changed.emit(a,b));return a},get_changed:function(){null==this._changed&&(this._changed=new ra);return this._changed},__class__:I};var la=function(a,b){this._next=null;this._signal=a;this._listener=b;this.stayInList=!0};la.__name__=
!0;la.__interfaces__=[R];la.prototype={once:function(){this.stayInList=!1;return this},dispose:function(){null!=this._signal&&(this._signal.disconnect(this),this._signal=null)},__class__:la};var w=function(a){this._head=null!=a?new la(this,a):null;this._deferredTasks=null};w.__name__=!0;w.prototype={connectImpl:function(a,b){var c=this,d=new la(this,a);this._head==w.DISPATCHING_SENTINEL?this.defer(function(){c.listAdd(d,b)}):this.listAdd(d,b);return d},disconnect:function(a){var b=this;this._head==
w.DISPATCHING_SENTINEL?this.defer(function(){b.listRemove(a)}):this.listRemove(a)},defer:function(a){for(var b=null,c=this._deferredTasks;null!=c;)b=c,c=c.next;a=new ob(a);null!=b?b.next=a:this._deferredTasks=a},willEmit:function(){var a=this._head;this._head=w.DISPATCHING_SENTINEL;return a},didEmit:function(a){this._head=a;a=this._deferredTasks;for(this._deferredTasks=null;null!=a;)a.fn(),a=a.next},listAdd:function(a,b){if(b)a._next=this._head,this._head=a;else{for(var c=null,d=this._head;null!=
d;)c=d,d=d._next;null!=c?c._next=a:this._head=a}},listRemove:function(a){for(var b=null,c=this._head;null!=c;){if(c==a){a=c._next;null==b?this._head=a:b._next=a;break}b=c;c=c._next}},__class__:w};var ra=function(a){w.call(this,a)};ra.__name__=!0;ra.__super__=w;ra.prototype=l(w.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a,b){var c=this;this._head==w.DISPATCHING_SENTINEL?this.defer(function(){c.emitImpl(a,b)}):this.emitImpl(a,b)},emitImpl:function(a,
b){for(var c=this.willEmit(),d=c;null!=d;)d._listener(a,b),d.stayInList||d.dispose(),d=d._next;this.didEmit(c)},__class__:ra});var r=function(a){w.call(this,a)};r.__name__=!0;r.__super__=w;r.prototype=l(w.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a){var b=this;this._head==w.DISPATCHING_SENTINEL?this.defer(function(){b.emitImpl(a)}):this.emitImpl(a)},emitImpl:function(a){for(var b=this.willEmit(),c=b;null!=c;)c._listener(a),c.stayInList||c.dispose(),
c=c._next;this.didEmit(b)},__class__:r});var v=function(a,b){this._behavior=null;I.call(this,a,b)};v.__name__=!0;v.__super__=I;v.prototype=l(I.prototype,{set__:function(a){this._behavior=null;return I.prototype.set__.call(this,a)},update:function(a){null!=this._behavior&&(I.prototype.set__.call(this,this._behavior.update(a)),this._behavior.isComplete()&&(this._behavior=null))},__class__:v});var k=function(){};k.__name__=!0;k.init=function(){k._calledInit||(k._platform.init(),k._calledInit=!0)};var qa=
function(){};qa.__name__=!0;qa.info=function(){null};qa.__super__=Jb;qa.prototype=l(Jb.prototype,{__class__:qa});var pb=function(){this._realDt=0};pb.__name__=!0;pb.__super__=q;pb.prototype=l(q.prototype,{get_name:function(){return"SpeedAdjuster_5"},onUpdate:function(a){0<this._realDt&&(a=this._realDt,this._realDt=0);this.scale.update(a)},__class__:pb});var $=function(){};$.__name__=!0;$.__interfaces__=[R];$.prototype={__class__:$};var g={__ename__:!0,__constructs__:"WEBP,JXR,PNG,JPG,GIF,DDS,PVR,PKM,MP3,M4A,OPUS,OGG,WAV,Data".split(","),
WEBP:["WEBP",0]};g.WEBP.toString=i;g.WEBP.__enum__=g;g.JXR=["JXR",1];g.JXR.toString=i;g.JXR.__enum__=g;g.PNG=["PNG",2];g.PNG.toString=i;g.PNG.__enum__=g;g.JPG=["JPG",3];g.JPG.toString=i;g.JPG.__enum__=g;g.GIF=["GIF",4];g.GIF.toString=i;g.GIF.__enum__=g;g.DDS=["DDS",5];g.DDS.toString=i;g.DDS.__enum__=g;g.PVR=["PVR",6];g.PVR.toString=i;g.PVR.__enum__=g;g.PKM=["PKM",7];g.PKM.toString=i;g.PKM.__enum__=g;g.MP3=["MP3",8];g.MP3.toString=i;g.MP3.__enum__=g;g.M4A=["M4A",9];g.M4A.toString=i;g.M4A.__enum__=
g;g.OPUS=["OPUS",10];g.OPUS.toString=i;g.OPUS.__enum__=g;g.OGG=["OGG",11];g.OGG.toString=i;g.OGG.__enum__=g;g.WAV=["WAV",12];g.WAV.toString=i;g.WAV.__enum__=g;g.Data=["Data",13];g.Data.toString=i;g.Data.__enum__=g;var qb=function(a,b,c,d){this.name=a;this.url=b;this.format=c;this.bytes=d};qb.__name__=!0;qb.prototype={__class__:qb};var Ja=function(){};Ja.__name__=!0;Ja.__interfaces__=[R];Ja.prototype={__class__:Ja};var Ka=function(){};Ka.__name__=!0;Ka.__interfaces__=[$];Ka.prototype={__class__:Ka};
var K=function(){this._localBase=this._remoteBase=null;this._entries=[]};K.__name__=!0;K.fromAssets=function(a,b){null==b&&(b=!0);var c=pa.field(Lb.getType(K).assets[0],a);if(null==c){if(b)throw E.withFields("Missing asset pack",["name",a]);return null}var d=new K;d.set_localBase("assets");for(var e=0;e<c.length;){var f=c[e];++e;var h=f.name,ja=a+"/"+h+"?v="+H.string(f.md5),p=K.inferFormat(h);p!=g.Data&&(h=E.removeFileExtension(h));d.add(h,ja,f.bytes,p)}return d};K.inferFormat=function(a){a=E.getUrlExtension(a);
if(null!=a)switch(a.toLowerCase()){case "gif":return g.GIF;case "jpg":case "jpeg":return g.JPG;case "jxr":case "wdp":return g.JXR;case "png":return g.PNG;case "webp":return g.WEBP;case "dds":return g.DDS;case "pvr":return g.PVR;case "pkm":return g.PKM;case "m4a":return g.M4A;case "mp3":return g.MP3;case "ogg":return g.OGG;case "opus":return g.OPUS;case "wav":return g.WAV}else null;return g.Data};K.prototype={add:function(a,b,c,d){null==c&&(c=0);null==d&&(d=K.inferFormat(b));a=new qb(a,b,d,c);this._entries.push(a);
return a},iterator:function(){return u.iter(this._entries)},getFullURL:function(a){var b;b=null!=this.get_remoteBase()&&K._supportsCrossOrigin?this.get_remoteBase():this.get_localBase();return null!=b?E.joinPath(b,a.url):a.url},get_localBase:function(){return this._localBase},set_localBase:function(a){null!=a&&Mb.that(!mb.startsWith(a,"http://")&&!mb.startsWith(a,"https://"),"localBase must be a path on the same domain, NOT starting with http(s)://",null);return this._localBase=a},get_remoteBase:function(){return this._remoteBase},
__class__:K};var C={__ename__:!0,__constructs__:["Normal","Add","Mask","Copy"],Normal:["Normal",0]};C.Normal.toString=i;C.Normal.__enum__=C;C.Add=["Add",1];C.Add.toString=i;C.Add.__enum__=C;C.Mask=["Mask",2];C.Mask.toString=i;C.Mask.__enum__=C;C.Copy=["Copy",3];C.Copy.toString=i;C.Copy.__enum__=C;var rb=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};rb.__name__=!0;rb.prototype={__class__:rb};var m=function(){this.blendMode=this.scissor=null;var a=this;this._flags=139;this._localMatrix=
new S;var b=function(){a._flags|=12};this.x=new v(0,b);this.y=new v(0,b);this.rotation=new v(0,b);this.scaleX=new v(1,b);this.scaleY=new v(1,b);this.anchorX=new v(0,b);this.anchorY=new v(0,b);this.alpha=new v(1)};m.__name__=!0;m.hitTest=function(a,b,c){var d=a._compMap.Sprite_2;if(null!=d){if(3!=(d._flags&3))return null;d.getLocalMatrix().inverseTransform(b,c,m._scratchPoint)&&(b=m._scratchPoint.x,c=m._scratchPoint.y);var e=d.scissor;if(null!=e&&!e.contains(b,c))return null}a=m.hitTestBackwards(a.firstChild,
b,c);return null!=a?a:null!=d&&d.containsLocal(b,c)?d:null};m.render=function(a,b){var c=a._compMap.Sprite_2;if(null!=c){var d=c.alpha._value;if(0==(c._flags&1)||0>=d)return;b.save();1>d&&b.multiplyAlpha(d);null!=c.blendMode&&b.setBlendMode(c.blendMode);var d=c.getLocalMatrix(),e=d.m02,f=d.m12;0!=(c._flags&128)&&(e=Math.round(e),f=Math.round(f));b.transform(d.m00,d.m10,d.m01,d.m11,e,f);d=c.scissor;null!=d&&b.applyScissor(d.x,d.y,d.width,d.height);c.draw(b)}d=a._compMap.Director_4;if(null!=d){d=d.occludedScenes;
for(e=0;e<d.length;)f=d[e],++e,m.render(f,b)}for(d=a.firstChild;null!=d;)e=d.next,m.render(d,b),d=e;null!=c&&b.restore()};m.hitTestBackwards=function(a,b,c){if(null!=a){var d=m.hitTestBackwards(a.next,b,c);return null!=d?d:m.hitTest(a,b,c)}return null};m.__super__=q;m.prototype=l(q.prototype,{get_name:function(){return"Sprite_2"},getNaturalWidth:function(){return 0},getNaturalHeight:function(){return 0},containsLocal:function(a,b){return 0<=a&&a<this.getNaturalWidth()&&0<=b&&b<this.getNaturalHeight()},
getLocalMatrix:function(){0!=(this._flags&4)&&(this._flags&=-5,this._localMatrix.compose(this.x._value,this.y._value,this.scaleX._value,this.scaleY._value,3.141592653589793*this.rotation._value/180),this._localMatrix.translate(-this.anchorX._value,-this.anchorY._value));return this._localMatrix},setAnchor:function(a,b){this.anchorX.set__(a);this.anchorY.set__(b);return this},centerAnchor:function(){this.anchorX.set__(this.getNaturalWidth()/2);this.anchorY.set__(this.getNaturalHeight()/2);return this},
setXY:function(a,b){this.x.set__(a);this.y.set__(b);return this},setScale:function(a){this.scaleX.set__(a);this.scaleY.set__(a);return this},onAdded:function(){0!=(this._flags&256)&&this.connectHover()},onRemoved:function(){null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)},onUpdate:function(a){this.x.update(a);this.y.update(a);this.rotation.update(a);this.scaleX.update(a);this.scaleY.update(a);this.alpha.update(a);this.anchorX.update(a);this.anchorY.update(a)},
draw:function(){},getParentSprite:function(){if(null==this.owner)return null;for(var a=this.owner.parent;null!=a;){var b=a._compMap.Sprite_2;if(null!=b)return b;a=a.parent}return null},get_pointerIn:function(){null==this._pointerIn&&(this._pointerIn=new r);return this._pointerIn},get_pointerOut:function(){null==this._pointerOut&&(this._pointerOut=new r);return this._pointerOut},connectHover:function(){var a=this;null==this._hoverConnection&&(this._hoverConnection=k._platform.getPointer().move.connect(function(b){for(var c=
b.hit;null!=c;){if(c==a)return;c=c.getParentSprite()}null!=a._pointerOut&&0!=(a._flags&256)&&a._pointerOut.emit(b);a._flags&=-257;a._hoverConnection.dispose();a._hoverConnection=null}))},onPointerDown:function(a){this.onHover(a);null!=this._pointerDown&&this._pointerDown.emit(a)},onPointerMove:function(a){this.onHover(a);null!=this._pointerMove&&this._pointerMove.emit(a)},onHover:function(a){if(0==(this._flags&256)&&(this._flags|=256,null!=this._pointerIn||null!=this._pointerOut))null!=this._pointerIn&&
this._pointerIn.emit(a),this.connectHover()},onPointerUp:function(a){switch(a.source[1]){case 1:null!=this._pointerOut&&0!=(this._flags&256)&&this._pointerOut.emit(a),this._flags&=-257,null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)}null!=this._pointerUp&&this._pointerUp.emit(a)},__class__:m});var La=function(a,b,c){m.call(this);this.color=a;this.width=new v(b);this.height=new v(c)};La.__name__=!0;La.__super__=m;La.prototype=l(m.prototype,{draw:function(a){a.fillRect(this.color,
0,0,this.width._value,this.height._value)},getNaturalWidth:function(){return this.width._value},getNaturalHeight:function(){return this.height._value},onUpdate:function(a){m.prototype.onUpdate.call(this,a);this.width.update(a);this.height.update(a)},__class__:La});var Ma=function(a){this._kernings=null;this.xOffset=this.yOffset=this.xAdvance=0;this.page=null;this.x=this.y=this.width=this.height=0;this.charCode=a};Ma.__name__=!0;Ma.prototype={draw:function(a,b,c){0<this.width&&a.drawSubTexture(this.page,
b+this.xOffset,c+this.yOffset,this.x,this.y,this.width,this.height)},getKerning:function(a){return null!=this._kernings?H["int"](this._kernings.get(a)):0},setKerning:function(a,b){null==this._kernings&&(this._kernings=new V);this._kernings.set(a,b)},__class__:Ma};var aa=function(a,b){this.name=b;this._pack=a;this.reload()};aa.__name__=!0;aa.prototype={layoutText:function(a,b,c,d,e){null==e&&(e=0);null==d&&(d=0);null==c&&(c=0);null==b&&(b=F.Left);return new ba(this,a,b,c,d,e)},reload:function(){this._glyphs=
new V;this._glyphs.set(aa.NEWLINE.charCode,aa.NEWLINE);for(var a=new ma(this._pack.getFile(this.name+".fnt").toString()),b=new V,c=this.name.lastIndexOf("/"),c=0<=c?u.substr(this.name,0,c+1):"",d=a.keywords();d.hasNext();)switch(d.next()){case "info":for(var e=a.pairs();e.hasNext();){var f=e.next();switch(f.key){case "size":this.size=f.getInt()}}break;case "common":for(e=a.pairs();e.hasNext();)switch(f=e.next(),f.key){case "lineHeight":this.lineHeight=f.getInt()}break;case "page":for(var e=0,f=null,
h=a.pairs();h.hasNext();){var g=h.next();switch(g.key){case "id":e=g.getInt();break;case "file":f=g.getString()}}f=this._pack.getTexture(c+E.removeFileExtension(f));b.set(e,f);break;case "char":e=null;for(f=a.pairs();f.hasNext();)switch(h=f.next(),h.key){case "id":e=new Ma(h.getInt());break;case "x":e.x=h.getInt();break;case "y":e.y=h.getInt();break;case "width":e.width=h.getInt();break;case "height":e.height=h.getInt();break;case "page":h=h.getInt();e.page=b.get(h);break;case "xoffset":e.xOffset=
h.getInt();break;case "yoffset":e.yOffset=h.getInt();break;case "xadvance":e.xAdvance=h.getInt()}this._glyphs.set(e.charCode,e);break;case "kerning":e=null;h=f=0;for(g=a.pairs();g.hasNext();){var p=g.next();switch(p.key){case "first":e=this._glyphs.get(p.getInt());break;case "second":f=p.getInt();break;case "amount":h=p.getInt()}}null!=e&&0!=h&&e.setKerning(f,h)}},__class__:aa};var F={__ename__:!0,__constructs__:["Left","Center","Right"],Left:["Left",0]};F.Left.toString=i;F.Left.__enum__=F;F.Center=
["Center",1];F.Center.toString=i;F.Center.__enum__=F;F.Right=["Right",2];F.Right.toString=i;F.Right.__enum__=F;var ba=function(a,b,c,d,e,f){this.lines=0;var h=this;this._font=a;this._glyphs=[];this._offsets=[];this._lineOffset=Math.round(a.lineHeight+f);this.bounds=new sa;for(var g=[],f=b.length,p=0;p<f;){var o=p++,o=b.charCodeAt(o),o=a._glyphs.get(o);null!=o?this._glyphs.push(o):null}for(var b=-1,i=0,j=0,a=a._glyphs.get(10),f=function(){h.bounds.width=L.max(h.bounds.width,i);h.bounds.height+=j;g[h.lines]=
i;j=i=0;++h.lines},p=0;p<this._glyphs.length;){o=this._glyphs[p];this._offsets[p]=Math.round(i);var k=0<d&&i+o.width>d;k||o==a?(k&&(0<=b?(this._glyphs[b]=a,i=this._offsets[b],p=b):this._glyphs.splice(p,0,a)),b=-1,j=this._lineOffset,f()):(32==o.charCode&&(b=p),i+=o.xAdvance+e,j=L.max(j,o.height+o.yOffset),p+1<this._glyphs.length&&(i+=o.getKerning(this._glyphs[p+1].charCode)));++p}f();e=0;a=ba.getAlignOffset(c,g[0],d);b=1.79769313486231E308;f=-1.79769313486231E308;o=p=0;for(k=this._glyphs.length;o<
k;){var l=this._glyphs[o];10==l.charCode&&(e+=this._lineOffset,++p,a=ba.getAlignOffset(c,g[p],d));this._offsets[o]+=a;var m=e+l.yOffset;b<m||(b=m);f=L.max(f,m+l.height);++o}this.bounds.x=ba.getAlignOffset(c,this.bounds.width,d);this.bounds.y=b;this.bounds.height=f-b};ba.__name__=!0;ba.getAlignOffset=function(a,b,c){switch(a[1]){case 0:return 0;case 2:return c-b;case 1:return Math.round((c-b)/2)}};ba.prototype={draw:function(a){for(var b=0,c=0,d=this._glyphs.length;c<d;){var e=this._glyphs[c];10==
e.charCode?b+=this._lineOffset:e.draw(a,this._offsets[c],b);++c}},__class__:ba};var ma=function(a){this._configText=a;this._keywordPattern=new W("([A-Za-z]+)(.*)","");this._pairPattern=new W('([A-Za-z]+)=("[^"]*"|[^\\s]+)',"")};ma.__name__=!0;ma.advance=function(a,b){var c=b.matchedPos();return u.substr(a,c.pos+c.len,a.length)};ma.prototype={keywords:function(){var a=this,b=this._configText;return{next:function(){b=ma.advance(b,a._keywordPattern);a._pairText=a._keywordPattern.matched(2);return a._keywordPattern.matched(1)},
hasNext:function(){return a._keywordPattern.match(b)}}},pairs:function(){var a=this,b=this._pairText;return{next:function(){b=ma.advance(b,a._pairPattern);return new sb(a._pairPattern.matched(1),a._pairPattern.matched(2))},hasNext:function(){return a._pairPattern.match(b)}}},__class__:ma};var sb=function(a,b){this.key=a;this._value=b};sb.__name__=!0;sb.prototype={getInt:function(){return H.parseInt(this._value)},getString:function(){return 34!=this._value.charCodeAt(0)?null:u.substr(this._value,1,
this._value.length-2)},__class__:sb};var tb=function(){};tb.__name__=!0;tb.prototype={__class__:tb};var X=function(a){m.call(this);this.texture=a};X.__name__=!0;X.__super__=m;X.prototype=l(m.prototype,{draw:function(a){null!=this.texture&&a.drawTexture(this.texture,0,0)},getNaturalWidth:function(){return null!=this.texture?this.texture.get_width():0},getNaturalHeight:function(){return null!=this.texture?this.texture.get_height():0},__class__:X});var Y={__ename__:!0,__constructs__:["Portrait","Landscape"],
Portrait:["Portrait",0]};Y.Portrait.toString=i;Y.Portrait.__enum__=Y;Y.Landscape=["Landscape",1];Y.Landscape.toString=i;Y.Landscape.__enum__=Y;var Na=function(){};Na.__name__=!0;Na.__interfaces__=[$];Na.prototype={__class__:Na};var Nb=function(){};Nb.__name__=!0;Nb.__interfaces__=[Na];var ta=function(a,b){null==b&&(b="");this._layout=null;var c=this;m.call(this);this._font=a;this._text=b;this._align=F.Left;this._flags|=64;var d=function(){c._flags|=64};this.wrapWidth=new v(0,d);this.letterSpacing=
new v(0,d);this.lineSpacing=new v(0,d)};ta.__name__=!0;ta.__super__=m;ta.prototype=l(m.prototype,{draw:function(a){this.updateLayout();this._layout.draw(a)},getNaturalWidth:function(){this.updateLayout();return 0<this.wrapWidth._value?this.wrapWidth._value:this._layout.bounds.width},getNaturalHeight:function(){this.updateLayout();var a=this._layout.lines*(this._font.lineHeight+this.lineSpacing._value),b=this._layout.bounds.height;return a>b?a:b},containsLocal:function(a,b){this.updateLayout();return this._layout.bounds.contains(a,
b)},set_text:function(a){a!=this._text&&(this._text=a,this._flags|=64);return a},set_align:function(a){a!=this._align&&(this._align=a,this._flags|=64);return a},updateLayout:function(){0!=(this._flags&64)&&(this._flags&=-65,this._layout=this._font.layoutText(this._text,this._align,this.wrapWidth._value,this.letterSpacing._value,this.lineSpacing._value))},onUpdate:function(a){m.prototype.onUpdate.call(this,a);this.wrapWidth.update(a);this.letterSpacing.update(a);this.lineSpacing.update(a)},__class__:ta});
var A={__ename__:!0,__constructs__:["Left","Middle","Right","Unknown"],Left:["Left",0]};A.Left.toString=i;A.Left.__enum__=A;A.Middle=["Middle",1];A.Middle.toString=i;A.Middle.__enum__=A;A.Right=["Right",2];A.Right.toString=i;A.Right.__enum__=A;A.Unknown=function(a){a=["Unknown",3,a];a.__enum__=A;a.toString=i;return a};var O={__ename__:!0,__constructs__:["Default","Button","None"],Default:["Default",0]};O.Default.toString=i;O.Default.__enum__=O;O.Button=["Button",1];O.Button.toString=i;O.Button.__enum__=
O;O.None=["None",2];O.None.toString=i;O.None.__enum__=O;var ub=function(){this.init(0,0,0,null)};ub.__name__=!0;ub.prototype={init:function(a,b,c,d){this.id=a;this.viewX=b;this.viewY=c;this.button=d},__class__:ub};var ua={__ename__:!0,__constructs__:["Mouse","Touch"]};ua.Mouse=function(a){a=["Mouse",0,a];a.__enum__=ua;a.toString=i;return a};ua.Touch=function(a){a=["Touch",1,a];a.__enum__=ua;a.toString=i;return a};var vb=function(){this.init(0,0,0,null,null)};vb.__name__=!0;vb.prototype={init:function(a,
b,c,d,e){this.id=a;this.viewX=b;this.viewY=c;this.hit=d;this.source=e;this._stopped=!1},__class__:vb};var wb=function(a){this.id=a;this._source=ua.Touch(this)};wb.__name__=!0;wb.prototype={init:function(a,b){this.viewX=a;this.viewY=b},__class__:wb};var L=function(){};L.__name__=!0;L.max=function(a,b){return a>b?a:b};L.min=function(a,b){return a<b?a:b};var S=function(){this.identity()};S.__name__=!0;S.multiply=function(a,b,c){null==c&&(c=new S);var d=a.m00*b.m00+a.m01*b.m10,e=a.m00*b.m01+a.m01*b.m11,
f=a.m00*b.m02+a.m01*b.m12+a.m02;c.m00=d;c.m01=e;c.m02=f;d=a.m10*b.m00+a.m11*b.m10;e=a.m10*b.m01+a.m11*b.m11;f=a.m10*b.m02+a.m11*b.m12+a.m12;c.m10=d;c.m11=e;c.m12=f;return c};S.prototype={set:function(a,b,c,d,e,f){this.m00=a;this.m01=c;this.m02=e;this.m10=b;this.m11=d;this.m12=f},identity:function(){this.set(1,0,0,1,0,0)},compose:function(a,b,c,d,e){var f=Math.sin(e),e=Math.cos(e);this.set(e*c,f*c,-f*d,e*d,a,b)},translate:function(a,b){this.m02+=this.m00*a+this.m01*b;this.m12+=this.m11*b+this.m10*
a},invert:function(){var a=this.determinant();if(0==a)return!1;this.set(this.m11/a,-this.m01/a,-this.m10/a,this.m00/a,(this.m01*this.m12-this.m11*this.m02)/a,(this.m10*this.m02-this.m00*this.m12)/a);return!0},transformArray:function(a,b,c){for(var d=0;d<b;){var e=a[d],f=a[d+1];c[d++]=e*this.m00+f*this.m01+this.m02;c[d++]=e*this.m10+f*this.m11+this.m12}},determinant:function(){return this.m00*this.m11-this.m01*this.m10},inverseTransform:function(a,b,c){var d=this.determinant();if(0==d)return!1;a-=
this.m02;b-=this.m12;c.x=(a*this.m11-b*this.m01)/d;c.y=(b*this.m00-a*this.m10)/d;return!0},clone:function(a){null==a&&(a=new S);a.set(this.m00,this.m10,this.m01,this.m11,this.m02,this.m12);return a},__class__:S};var sa=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.set(a,b,c,d)};sa.__name__=!0;sa.prototype={set:function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d},contains:function(a,b){a-=this.x;if(0<=this.width){if(0>a||a>this.width)return!1}else if(0<
a||a<this.width)return!1;b-=this.y;if(0<=this.height){if(0>b||b>this.height)return!1}else if(0<b||b<this.height)return!1;return!0},clone:function(a){null==a&&(a=new sa);a.set(this.x,this.y,this.width,this.height);return a},equals:function(a){return this.x==a.x&&this.y==a.y&&this.width==a.width&&this.height==a.height},__class__:sa};var x=function(){this._disposed=!1};x.__name__=!0;x.__interfaces__=[$];x.prototype={dispose:function(){this._disposed||(this._disposed=!0,this.onDisposed())},onDisposed:function(){null},
__class__:x};var ca=function(a,b){var c=this;this.manifest=b;this._platform=a;this.promise=new Oa;this._bytesLoaded=new Z;this._pack=new Pa(b,this);var d=fa.array(b);if(0==d.length)this.handleSuccess();else{for(var e=new Z,f=0;f<d.length;){var h=d[f];++f;var g=e.get(h.name);null==g&&(g=[],e.set(h.name,g));g.push(h)}this._assetsRemaining=fa.count(e);for(d=e.iterator();d.hasNext();)e=[d.next()],this.pickBestEntry(e[0],function(a){return function(d){if(null!=d){var e=b.getFullURL(d);try{c.loadEntry(e,
d)}catch(f){c.handleError(d,"Unexpected error: "+H.string(f))}e=c.promise;e.set_total(e._total+d.bytes)}else d=a[0][0],ca.isAudio(d.format)?c.handleLoad(d,M.getInstance()):c.handleError(d,"Could not find a supported format to load")}}(e))}};ca.__name__=!0;ca.isAudio=function(a){switch(a[1]){case 8:case 9:case 10:case 11:case 12:return!0;default:return!1}};ca.prototype={onDisposed:function(){},pickBestEntry:function(a,b){this.getAssetFormats(function(c){for(var d=0;d<c.length;){var e=c[d];++d;for(var f=
0;f<a.length;){var h=a[f];++f;if(h.format==e){b(h);return}}}b(null)})},loadEntry:function(){null},getAssetFormats:function(){null},handleLoad:function(a,b){if(!this._pack.disposed){this.handleProgress(a,a.bytes);var c;switch(a.format[1]){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c=this._pack.textures;break;case 8:case 9:case 10:case 11:case 12:c=this._pack.sounds;break;case 13:c=this._pack.files}c.set(a.name,b);this._assetsRemaining-=1;0==this._assetsRemaining&&this.handleSuccess()}},
handleProgress:function(a,b){this._bytesLoaded.set(a.name,b);for(var c=0,d=this._bytesLoaded.iterator();d.hasNext();)var e=d.next(),c=c+e;this.promise.set_progress(c)},handleSuccess:function(){this.promise.set_result(this._pack)},handleError:function(a,b){this.promise.error.emit(E.withFields(b,["url",a.url]))},handleTextureError:function(a){this.handleError(a,"Failed to create texture. Is the GPU context unavailable?")},__class__:ca};var Pa=function(a,b){this.disposed=!1;this._manifest=a;this.loader=
b;this.textures=new Z;this.sounds=new Z;this.files=new Z};Pa.__name__=!0;Pa.__interfaces__=[Ja];Pa.prototype={getTexture:function(a,b){null==b&&(b=!0);var c=this.textures.get(a);if(null==c&&b)throw E.withFields("Missing texture",["name",a]);return c},getFile:function(a,b){null==b&&(b=!0);var c=this.files.get(a);if(null==c&&b)throw E.withFields("Missing file",["name",a]);return c},dispose:function(){if(!this.disposed){this.disposed=!0;for(var a=this.textures.iterator();a.hasNext();)a.next().dispose();
this.textures=null;for(a=this.sounds.iterator();a.hasNext();)a.next().dispose();this.sounds=null;for(a=this.files.iterator();a.hasNext();)a.next().dispose();this.files=null;this.loader.onDisposed()}},__class__:Pa};var va=function(a){this._disposed=!1;this._content=a};va.__name__=!0;va.__interfaces__=[Ka];va.__super__=x;va.prototype=l(x.prototype,{toString:function(){return this._content},onDisposed:function(){this._content=null},__class__:va});var Ub=function(){};Ub.__name__=!0;var J=function(a){this._pointer=
a;this._source=ua.Mouse(J._sharedEvent);this.down=new r;this.move=new r;this.up=new r;this.scroll=new r;this._y=this._x=0;this._cursor=O.Default;this._buttonStates=new V};J.__name__=!0;J.__interfaces__=[Ub];J.prototype={submitDown:function(a,b,c){this._buttonStates.exists(c)||(this._buttonStates.set(c,!0),this.prepare(a,b,xb.toButton(c)),this._pointer.submitDown(a,b,this._source),this.down.emit(J._sharedEvent))},submitMove:function(a,b){this.prepare(a,b,null);this._pointer.submitMove(a,b,this._source);
this.move.emit(J._sharedEvent)},submitUp:function(a,b,c){this._buttonStates.exists(c)&&(this._buttonStates.remove(c),this.prepare(a,b,xb.toButton(c)),this._pointer.submitUp(a,b,this._source),this.up.emit(J._sharedEvent))},submitScroll:function(a,b,c){this._x=a;this._y=b;if(null==this.scroll._head)return!1;this.scroll.emit(c);return!0},prepare:function(a,b,c){this._x=a;this._y=b;J._sharedEvent.init(J._sharedEvent.id+1,a,b,c)},__class__:J};var yb=function(){};yb.__name__=!0;yb.prototype={__class__:yb};
var z=function(a,b,c){null==c&&(c=!1);null==b&&(b=0);null==a&&(a=0);this.down=new r;this.move=new r;this.up=new r;this._x=a;this._y=b;this._isDown=c};z.__name__=!0;z.__interfaces__=[yb];z.prototype={submitDown:function(a,b,c){if(!this._isDown){this.submitMove(a,b,c);this._isDown=!0;var d=[],e=m.hitTest(k.root,a,b);if(null!=e){var f=e.owner;do{var h=f._compMap.Sprite_2;null!=h&&d.push(h);f=f.parent}while(null!=f)}this.prepare(a,b,e,c);for(a=0;a<d.length;)if(b=d[a],++a,b.onPointerDown(z._sharedEvent),
z._sharedEvent._stopped)return;this.down.emit(z._sharedEvent)}},submitMove:function(a,b,c){if(!(a==this._x&&b==this._y)){var d=[],e=m.hitTest(k.root,a,b);if(null!=e){var f=e.owner;do{var h=f._compMap.Sprite_2;null!=h&&d.push(h);f=f.parent}while(null!=f)}this.prepare(a,b,e,c);for(a=0;a<d.length;)if(b=d[a],++a,b.onPointerMove(z._sharedEvent),z._sharedEvent._stopped)return;this.move.emit(z._sharedEvent)}},submitUp:function(a,b,c){if(this._isDown){this.submitMove(a,b,c);this._isDown=!1;var d=[],e=m.hitTest(k.root,
a,b);if(null!=e){var f=e.owner;do{var h=f._compMap.Sprite_2;null!=h&&d.push(h);f=f.parent}while(null!=f)}this.prepare(a,b,e,c);for(a=0;a<d.length;)if(b=d[a],++a,b.onPointerUp(z._sharedEvent),z._sharedEvent._stopped)return;this.up.emit(z._sharedEvent)}},prepare:function(a,b,c,d){this._x=a;this._y=b;z._sharedEvent.init(z._sharedEvent.id+1,a,b,c,d)},__class__:z};var T=function(a,b,c){this._parent=null;this.rootX=this.rootY=0;this._disposed=!1;this.root=a;this._width=b;this._height=c};T.__name__=!0;T.__interfaces__=
[Nb];T.__super__=x;T.prototype=l(x.prototype,{onDisposed:function(){null==this._parent&&this.root.dispose()},get_width:function(){return this._width},get_height:function(){return this._height},__class__:T});var Ob=function(){};Ob.__name__=!0;var Ga=function(a,b){null==b&&(b=4);this._pointer=a;this._maxPoints=b;this._pointMap=new V;this._points=[];this.down=new r;this.move=new r;this.up=new r};Ga.__name__=!0;Ga.__interfaces__=[Ob];Ga.prototype={submitDown:function(a,b,c){if(!this._pointMap.exists(a)){var d=
new wb(a);d.init(b,c);this._pointMap.set(a,d);this._points.push(d);null==this._pointerTouch&&(this._pointerTouch=d,this._pointer.submitDown(b,c,d._source));this.down.emit(d)}},submitMove:function(a,b,c){a=this._pointMap.get(a);null!=a&&(a.init(b,c),this._pointerTouch==a&&this._pointer.submitMove(b,c,a._source),this.move.emit(a))},submitUp:function(a,b,c){var d=this._pointMap.get(a);null!=d&&(d.init(b,c),this._pointMap.remove(a),u.remove(this._points,d),this._pointerTouch==d&&(this._pointerTouch=null,
this._pointer.submitUp(b,c,d._source)),this.up.emit(d))},__class__:Ga};var Qa=function(){};Qa.__name__=!0;Qa.__interfaces__=[$];var M=function(){this._disposed=!1;this._playback=new Ra(this)};M.__name__=!0;M.__interfaces__=[Qa];M.getInstance=function(){null==M._instance&&(M._instance=new M);return M._instance};M.__super__=x;M.prototype=l(x.prototype,{onDisposed:function(){},__class__:M});var Pb=function(){};Pb.__name__=!0;Pb.__interfaces__=[R];var Ra=function(a){this._sound=a;this.volume=new v(0);
this._complete=new I(!0)};Ra.__name__=!0;Ra.__interfaces__=[Pb];Ra.prototype={dispose:function(){},__class__:Ra};var Ha=function(){this.down=new r;this.move=new r;this.up=new r};Ha.__name__=!0;Ha.__interfaces__=[Ob];Ha.prototype={__class__:Ha};var wa=function(){this._entries=[]};wa.__name__=!0;wa.__interfaces__=[R];wa.prototype={addListener:function(a,b,c){a.addEventListener(b,c,!1);this._entries.push(new zb(a,b,c))},addDisposingListener:function(a,b,c){var d=this;this.addListener(a,b,function(a){d.dispose();
c(a)})},dispose:function(){for(var a=0,b=this._entries;a<b.length;){var c=b[a];++a;c.dispatcher.removeEventListener(c.type,c.listener,!1)}this._entries=[]},__class__:wa};var zb=function(a,b,c){this.dispatcher=a;this.type=b;this.listener=c};zb.__name__=!0;zb.prototype={__class__:zb};var xa=function(){};xa.__name__=!0;xa.__interfaces__=[tb];xa.prototype={__class__:xa};var Ab=function(){};Ab.__name__=!0;Ab.prototype={__class__:Ab};var ya=function(){};ya.__name__=!0;ya.__interfaces__=[Ab];ya.prototype=
{__class__:ya};var ia=function(){this._tickables=[]};ia.__name__=!0;ia.updateEntity=function(a,b){var c=a._compMap.SpeedAdjuster_5;if(null!=c&&(c._realDt=b,b*=c.scale._value,0>=b)){c.onUpdate(b);return}for(c=a.firstComponent;null!=c;){var d=c.next;c.onUpdate(b);c=d}for(c=a.firstChild;null!=c;)d=c.next,ia.updateEntity(c,b),c=d};ia.prototype={update:function(a){if(!(0>=a)){1<a&&(a=1);for(var b=0;b<this._tickables.length;){var c=this._tickables[b];null==c||c.update(a)?this._tickables.splice(b,1):++b}k.volume.update(a);
ia.updateEntity(k.root,a)}},render:function(a){var b=a.graphics;null!=b&&(a.willRender(),m.render(k.root,b),a.didRender())},__class__:ia};var Bb=function(){};Bb.__name__=!0;Bb.nextPowerOfTwo=function(a){for(var b=1;b<a;)b<<=1;return b};var xb=function(){};xb.__name__=!0;xb.toButton=function(a){switch(a){case 0:return A.Left;case 1:return A.Middle;case 2:return A.Right}return A.Unknown(a)};var Qb=function(){};Qb.__name__=!0;var Sa=function(a){this._firstDraw=!1;this._canvasCtx=a.getContext("2d")};
Sa.__name__=!0;Sa.__interfaces__=[xa];Sa.prototype={save:function(){this._canvasCtx.save()},transform:function(a,b,c,d,e,f){this._canvasCtx.transform(a,b,c,d,e,f)},restore:function(){this._canvasCtx.restore()},drawTexture:function(a,b,c){this.drawSubTexture(a,b,c,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,b,c,d,e,f,h){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawSubTexture(a,b,c,d,e,f,h),this._canvasCtx.globalCompositeOperation="source-over"):
this._canvasCtx.drawImage(a.root.image,a.rootX+d|0,a.rootY+e|0,f|0,h|0,b|0,c|0,f|0,h|0)},fillRect:function(a,b,c,d,e){if(this._firstDraw)this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.fillRect(a,b,c,d,e),this._canvasCtx.globalCompositeOperation="source-over";else{for(a=(16777215&a).toString(16);6>a.length;)a="0"+H.string(a);this._canvasCtx.fillStyle="#"+H.string(a);this._canvasCtx.fillRect(b|0,c|0,d|0,e|0)}},multiplyAlpha:function(a){this._canvasCtx.globalAlpha*=a},setBlendMode:function(a){var b;
switch(a[1]){case 0:b="source-over";break;case 1:b="lighter";break;case 2:b="destination-in";break;case 3:b="copy"}this._canvasCtx.globalCompositeOperation=b},applyScissor:function(a,b,c,d){this._canvasCtx.beginPath();this._canvasCtx.rect(a|0,b|0,c|0,d|0);this._canvasCtx.clip()},willRender:function(){this._firstDraw=!0},didRender:function(){},onResize:function(){},__class__:Sa};var ka=function(a){this.graphics=new Sa(a);this._hasGPU=new I(!0)};ka.__name__=!0;ka.__interfaces__=[ya];ka.prototype={get_type:function(){return N.Canvas},
createTextureFromImage:function(a){a=new za(ka.CANVAS_TEXTURES?j.createCanvas(a):a);return a.createTexture(a.width,a.height)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(){return null},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},__class__:ka};var Ta=function(a,b,c){T.call(this,a,b,c)};Ta.__name__=!0;Ta.__super__=T;Ta.prototype=l(T.prototype,{__class__:Ta});var za=function(a){this._graphics=null;this._disposed=
!1;this.image=a;this.width=a.width;this.height=a.height};za.__name__=!0;za.__interfaces__=[Qb];za.__super__=x;za.prototype=l(x.prototype,{createTexture:function(a,b){return new Ta(this,a,b)},onDisposed:function(){this._graphics=this.image=null},__class__:za});var n=function(a,b){ca.call(this,a,b)};n.__name__=!0;n.detectImageFormats=function(a){var b=[g.PNG,g.JPG,g.GIF],c=2,d;d=window.document.createElement("img");d.onload=d.onerror=function(){1==d.width&&b.unshift(g.WEBP);--c;0==c&&a(b)};d.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==";
var e;e=window.document.createElement("img");e.onload=e.onerror=function(){1==e.width&&b.unshift(g.JXR);--c;0==c&&a(b)};e.src="data:image/vnd.ms-photo;base64,SUm8AQgAAAAFAAG8AQAQAAAASgAAAIC8BAABAAAAAQAAAIG8BAABAAAAAQAAAMC8BAABAAAAWgAAAMG8BAABAAAAHwAAAAAAAAAkw91vA07+S7GFPXd2jckNV01QSE9UTwAZAYBxAAAAABP/gAAEb/8AAQAAAQAAAA=="};n.detectAudioFormats=function(){var a;a=window.document.createElement("audio");if(null==a||null==U(a,a.canPlayType))return[];var b=new W("\\b(iPhone|iPod|iPad|Android|Windows Phone)\\b",
""),c=window.navigator.userAgent;if(!s.get_supported()&&b.match(c))return[];for(var b=[{format:g.M4A,mimeType:"audio/mp4; codecs=mp4a"},{format:g.MP3,mimeType:"audio/mpeg"},{format:g.OPUS,mimeType:"audio/ogg; codecs=opus"},{format:g.OGG,mimeType:"audio/ogg; codecs=vorbis"},{format:g.WAV,mimeType:"audio/wav"}],c=[],d=0;d<b.length;){var e=b[d];++d;var f="";try{f=a.canPlayType(e.mimeType)}catch(h){}""!=f&&c.push(e.format)}return c};n.supportsBlob=function(){if(n._detectBlobSupport){n._detectBlobSupport=
!1;if((new W("\\bSilk\\b","")).match(window.navigator.userAgent)||null==window.Blob)return!1;var a=new XMLHttpRequest;a.open("GET",".",!0);if(""!=a.responseType)return!1;a.responseType="blob";if("blob"!=a.responseType)return!1;n._URL=j.loadExtension("URL").value}return null!=n._URL&&null!=n._URL.createObjectURL};n.__super__=ca;n.prototype=l(ca.prototype,{loadEntry:function(a,b){var c=this;switch(b.format[1]){case 0:case 1:case 2:case 3:case 4:var d;d=window.document.createElement("img");var e=new wa;
e.addDisposingListener(d,"load",function(){n.supportsBlob()&&n._URL.revokeObjectURL(d.src);var a=c._platform.getRenderer().createTextureFromImage(d);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});e.addDisposingListener(d,"error",function(){c.handleError(b,"Failed to load image")});n.supportsBlob()?this.download(a,b,"blob",function(a){d.src=n._URL.createObjectURL(a)}):d.src=a;break;case 5:case 6:case 7:this.download(a,b,"arraybuffer",function(){var a=c._platform.getRenderer().createCompressedTexture(b.format,
null);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});break;case 8:case 9:case 10:case 11:case 12:if(s.get_supported())this.download(a,b,"arraybuffer",function(a){s.ctx.decodeAudioData(a,function(a){c.handleLoad(b,new s(a))},function(){c.handleLoad(b,M.getInstance())})});else{var f;f=window.document.createElement("audio");f.preload="auto";var h=++n._mediaRefCount;null==n._mediaElements&&(n._mediaElements=new V);n._mediaElements.set(h,f);e=new wa;e.addDisposingListener(f,"canplaythrough",function(){n._mediaElements.remove(h);
c.handleLoad(b,new Aa(f))});e.addDisposingListener(f,"error",function(){n._mediaElements.remove(h);var a=f.error.code;3==a||4==a?c.handleLoad(b,M.getInstance()):c.handleError(b,"Failed to load audio: "+f.error.code)});e.addListener(f,"progress",function(){if(0<f.buffered.length&&0<f.duration){var a=f.buffered.end(0)/f.duration;c.handleProgress(b,a*b.bytes|0)}});f.src=a;f.load()}break;case 13:this.download(a,b,"text",function(a){c.handleLoad(b,new va(a))})}},getAssetFormats:function(a){var b=this;
null==n._supportedFormats&&(n._supportedFormats=new Oa,n.detectImageFormats(function(a){n._supportedFormats.set_result(b._platform.getRenderer().getCompressedTextureFormats().concat(a).concat(n.detectAudioFormats()).concat([g.Data]))}));n._supportedFormats.get(a)},download:function(a,b,c,d){var e=this,f=null,h=null,g=0,i=!1,j=function(){i&&(i=!1,window.clearInterval(g))},k=3,l=function(){--k;return 0<=k?(h(),!0):!1},h=function(){j();null!=f&&f.abort();f=new XMLHttpRequest;f.open("GET",a,!0);f.responseType=
c;var h=0;f.onprogress=function(a){i||(i=!0,g=window.setInterval(function(){4!=f.readyState&&5E3<Date.now()-h&&!l()&&(j(),e.handleError(b,"Download stalled"))},1E3));h=Date.now();e.handleProgress(b,a.loaded)};f.onerror=function(){if(0!=f.status||!l())j(),e.handleError(b,"HTTP error "+f.status)};f.onload=function(){var a=f.response;null==a&&(a=f.responseText);j();d(a)};f.send()};h()},__class__:n});var Fa=function(a,b){J.call(this,a);this._canvas=b};Fa.__name__=!0;Fa.__super__=J;Fa.prototype=l(J.prototype,
{__class__:Fa});var Aa=function(a){this._disposed=!1;this.audioElement=a};Aa.__name__=!0;Aa.__interfaces__=[Qa];Aa.__super__=x;Aa.prototype=l(x.prototype,{onDisposed:function(){this.audioElement=null},__class__:Aa});var Cb=function(){};Cb.__name__=!0;Cb.prototype={__class__:Cb};var ha=function(a){var b=this;this._canvas=a;this.resize=new da;this.scaleFactor=ha.computeScaleFactor();1!=this.scaleFactor&&(j.setVendorStyle(this._canvas,"transform-origin","top left"),j.setVendorStyle(this._canvas,"transform",
"scale("+1/this.scaleFactor+")"));j.SHOULD_HIDE_MOBILE_BROWSER&&(window.addEventListener("orientationchange",function(){j.callLater(U(b,b.hideMobileBrowser),200)},!1),this.hideMobileBrowser());window.addEventListener("resize",U(this,this.onWindowResize),!1);this.onWindowResize(null);this.orientation=new I(null);null!=window.orientation&&(window.addEventListener("orientationchange",U(this,this.onOrientationChange),!1),this.onOrientationChange(null));this.fullscreen=new I(!1);j.addVendorListener(window.document,
"fullscreenchange",function(){b.updateFullscreen()},!1);this.updateFullscreen()};ha.__name__=!0;ha.__interfaces__=[Cb];ha.computeScaleFactor=function(){var a=window.devicePixelRatio;null==a&&(a=1);var b=window.document.createElement("canvas").getContext("2d"),b=j.loadExtension("backingStorePixelRatio",b).value;null==b&&(b=1);a/=b;b=window.screen.height;return 1136<a*window.screen.width||1136<a*b?1:a};ha.prototype={get_width:function(){return this._canvas.width},get_height:function(){return this._canvas.height},
onWindowResize:function(){var a=this._canvas.parentElement.getBoundingClientRect();this.resizeCanvas(a.width,a.height)},resizeCanvas:function(a,b){var c=this.scaleFactor*a,d=this.scaleFactor*b;if(this._canvas.width==c&&this._canvas.height==d)return!1;this._canvas.width=c|0;this._canvas.height=d|0;this.resize.emit();return!0},hideMobileBrowser:function(){var a=this,b=window.document.documentElement.style;b.height=window.innerHeight+100+"px";b.width=window.innerWidth+"px";b.overflow="visible";j.callLater(function(){j.hideMobileBrowser();
j.callLater(function(){b.height=window.innerHeight+"px";a.onWindowResize(null)},100)})},onOrientationChange:function(){this.orientation.set__(j.orientation(window.orientation))},updateFullscreen:function(){this.fullscreen.set__(!0==j.loadFirstExtension(["fullscreen","fullScreen","isFullScreen"],window.document).value)},__class__:ha};var j=function(){};j.__name__=!0;j.callLater=function(a,b){null==b&&(b=0);window.setTimeout(a,b)};j.hideMobileBrowser=function(){window.scrollTo(1,0)};j.loadExtension=
function(a,b){null==b&&(b=window);var c=pa.field(b,a);if(null!=c)return{prefix:"",field:a,value:c};for(var c=a.charAt(0).toUpperCase()+u.substr(a,1,null),d=0,e=j.VENDOR_PREFIXES;d<e.length;){var f=e[d];++d;var h=f+c,g=pa.field(b,h);if(null!=g)return{prefix:f,field:h,value:g}}return{prefix:null,field:null,value:null}};j.loadFirstExtension=function(a,b){for(var c=0;c<a.length;){var d=a[c];++c;d=j.loadExtension(d,b);if(null!=d.field)return d}return{prefix:null,field:null,value:null}};j.polyfill=function(a,
b){null==b&&(b=window);var c=j.loadExtension(a,b).value;if(null==c)return!1;b[a]=c;return!0};j.setVendorStyle=function(a,b,c){for(var a=a.style,d=0,e=j.VENDOR_PREFIXES;d<e.length;){var f=e[d];++d;a.setProperty("-"+f+"-"+b,c)}a.setProperty(b,c)};j.addVendorListener=function(a,b,c,d){for(var e=0,f=j.VENDOR_PREFIXES;e<f.length;){var h=f[e];++e;a.addEventListener(h+b,c,d)}a.addEventListener(b,c,d)};j.orientation=function(a){switch(a){case -90:case 90:return Y.Landscape;default:return Y.Portrait}};j.createEmptyCanvas=
function(a,b){var c;c=window.document.createElement("canvas");c.width=a;c.height=b;return c};j.createCanvas=function(a){var b=j.createEmptyCanvas(a.width,a.height),c=b.getContext("2d");c.save();c.globalCompositeOperation="copy";c.drawImage(a,0,0);c.restore();return b};j.detectSlowDriver=function(a){if(0<=window.navigator.platform.indexOf("Win")&&null!=window.chrome){for(var b=0,a=a.getSupportedExtensions();b<a.length;){var c=a[b];++b;if(0<=c.indexOf("WEBGL_compressed_texture"))return!1}return!0}return!1};
j.fixAndroidMath=function(){if(0<=window.navigator.userAgent.indexOf("Linux; U; Android 4")){var a=Math.sin,b=Math.cos;Math.sin=function(b){return 0==b?0:a(b)};Math.cos=function(a){return 0==a?1:b(a)}}};var s=function(a){this._disposed=!1;this.buffer=a};s.__name__=!0;s.__interfaces__=[Qa];s.get_supported=function(){if(s._detectSupport){s._detectSupport=!1;var a=j.loadExtension("AudioContext").value;null!=a&&(s.ctx=new a,s.gain=s.createGain(),s.gain.connect(s.ctx.destination),k.volume.watch(function(a){s.gain.gain.value=
a}))}return null!=s.ctx};s.createGain=function(){return null!=s.ctx.createGain?s.ctx.createGain():s.ctx.createGainNode()};s.__super__=x;s.prototype=l(x.prototype,{onDisposed:function(){this.buffer=null},__class__:s});var Db=function(a){this._quads=this._maxQuads=this._dataOffset=this._backbufferWidth=this._backbufferHeight=0;this._pendingSetScissor=!1;this._lastBlendMode=this._lastRenderTarget=this._lastShader=this._lastTexture=this._lastScissor=this._currentBlendMode=this._currentShader=this._currentTexture=
this._currentRenderTarget=null;this._gl=a;a.clearColor(0,0,0,0);a.enable(3042);a.pixelStorei(37441,1);this._vertexBuffer=a.createBuffer();a.bindBuffer(34962,this._vertexBuffer);this._quadIndexBuffer=a.createBuffer();a.bindBuffer(34963,this._quadIndexBuffer);this._drawTextureShader=new Ua(a);this._drawPatternShader=new Va(a);this._fillRectShader=new Wa(a);this.resize(16)};Db.__name__=!0;Db.prototype={resizeBackbuffer:function(a,b){this._gl.viewport(0,0,a,b);this._backbufferWidth=a;this._backbufferHeight=
b},willRender:function(){},didRender:function(){this.flush()},bindTexture:function(a){this.flush();this._currentTexture=this._lastTexture=null;this._gl.bindTexture(3553,a)},deleteTexture:function(a){null!=this._lastTexture&&this._lastTexture.root==a&&(this.flush(),this._currentTexture=this._lastTexture=null);this._gl.deleteTexture(a.nativeTexture)},deleteFramebuffer:function(a){a==this._lastRenderTarget&&(this.flush(),this._currentRenderTarget=this._lastRenderTarget=null);this._gl.deleteFramebuffer(a.framebuffer)},
prepareDrawTexture:function(a,b,c,d){d!=this._lastTexture&&(this.flush(),this._lastTexture=d);return this.prepareQuad(5,a,b,c,this._drawTextureShader)},prepareFillRect:function(a,b,c){return this.prepareQuad(6,a,b,c,this._fillRectShader)},prepareQuad:function(a,b,c,d,e){b!=this._lastRenderTarget&&(this.flush(),this._lastRenderTarget=b);c!=this._lastBlendMode&&(this.flush(),this._lastBlendMode=c);e!=this._lastShader&&(this.flush(),this._lastShader=e);if(null!=d||null!=this._lastScissor)if(null==d||
null==this._lastScissor||!this._lastScissor.equals(d))this.flush(),this._lastScissor=null!=d?d.clone(this._lastScissor):null,this._pendingSetScissor=!0;this._quads>=this._maxQuads&&this.resize(2*this._maxQuads);++this._quads;b=this._dataOffset;this._dataOffset+=4*a;return b},flush:function(){if(!(1>this._quads)){this._lastRenderTarget!=this._currentRenderTarget&&this.bindRenderTarget(this._lastRenderTarget);if(this._lastBlendMode!=this._currentBlendMode){switch(this._lastBlendMode[1]){case 0:this._gl.blendFunc(1,
771);break;case 1:this._gl.blendFunc(1,1);break;case 2:this._gl.blendFunc(0,770);break;case 3:this._gl.blendFunc(1,0)}this._currentBlendMode=this._lastBlendMode}this._pendingSetScissor&&(null!=this._lastScissor?(this._gl.enable(3089),this._gl.scissor(this._lastScissor.x|0,this._lastScissor.y|0,this._lastScissor.width|0,this._lastScissor.height|0)):this._gl.disable(3089),this._pendingSetScissor=!1);this._lastTexture!=this._currentTexture&&(this._gl.bindTexture(3553,this._lastTexture.root.nativeTexture),
this._currentTexture=this._lastTexture);this._lastShader!=this._currentShader&&(this._lastShader.useProgram(),this._lastShader.prepare(),this._currentShader=this._lastShader);if(this._lastShader==this._drawPatternShader){var a=this._lastTexture,b=a.root;this._drawPatternShader.setRegion(a.rootX/b.width,a.rootY/b.height,a._width/b.width,a._height/b.height)}this._gl.bufferData(34962,this.data.subarray(0,this._dataOffset),35040);this._gl.drawElements(4,6*this._quads,5123,0);this._dataOffset=this._quads=
0}},resize:function(a){this.flush();if(!(1024<a)){this._maxQuads=a;this.data=new Float32Array(24*a);this._gl.bufferData(34962,4*this.data.length,35040);for(var b=new Uint16Array(6*a),c=0;c<a;){var d=c++;b[6*d]=4*d;b[6*d+1]=4*d+1;b[6*d+2]=4*d+2;b[6*d+3]=4*d+2;b[6*d+4]=4*d+3;b[6*d+5]=4*d}this._gl.bufferData(34963,b,35044)}},bindRenderTarget:function(a){null!=a?(this._gl.bindFramebuffer(36160,a.framebuffer),this._gl.viewport(0,0,a.width,a.height)):(this._gl.bindFramebuffer(36160,null),this._gl.viewport(0,
0,this._backbufferWidth,this._backbufferHeight));this._lastRenderTarget=this._currentRenderTarget=a},__class__:Db};var P=function(a,b){this._inverseProjection=this._stateList=null;null==P._scratchQuadArray&&(P._scratchQuadArray=new Float32Array(8));this._batcher=a;this._renderTarget=b};P.__name__=!0;P.__interfaces__=[xa];P.prototype={save:function(){var a=this._stateList,b=this._stateList.next;null==b&&(b=new Xa,b.prev=a,a.next=b);a.matrix.clone(b.matrix);b.alpha=a.alpha;b.blendMode=a.blendMode;b.scissor=
null!=a.scissor?a.scissor.clone(b.scissor):null;this._stateList=b},transform:function(a,b,c,d,e,f){var h=this._stateList;P._scratchMatrix.set(a,b,c,d,e,f);S.multiply(h.matrix,P._scratchMatrix,h.matrix)},restore:function(){this._stateList=this._stateList.prev},drawTexture:function(a,b,c){this.drawSubTexture(a,b,c,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,b,c,d,e,f,h){var g=this._stateList,i=a.root,b=this.transformQuad(b,c,f,h),c=i.width,i=i.height,d=(a.rootX+d)/c,e=(a.rootY+e)/i,
f=d+f/c,h=e+h/i,c=g.alpha,a=this._batcher.prepareDrawTexture(this._renderTarget,g.blendMode,g.scissor,a),g=this._batcher.data;g[a]=b[0];g[++a]=b[1];g[++a]=d;g[++a]=e;g[++a]=c;g[++a]=b[2];g[++a]=b[3];g[++a]=f;g[++a]=e;g[++a]=c;g[++a]=b[4];g[++a]=b[5];g[++a]=f;g[++a]=h;g[++a]=c;g[++a]=b[6];g[++a]=b[7];g[++a]=d;g[++a]=h;g[++a]=c},fillRect:function(a,b,c,d,e){var f=this._stateList,b=this.transformQuad(b,c,d,e),c=(a&16711680)/16711680,d=(a&65280)/65280,a=(a&255)/255,e=f.alpha,f=this._batcher.prepareFillRect(this._renderTarget,
f.blendMode,f.scissor),g=this._batcher.data;g[f]=b[0];g[++f]=b[1];g[++f]=c;g[++f]=d;g[++f]=a;g[++f]=e;g[++f]=b[2];g[++f]=b[3];g[++f]=c;g[++f]=d;g[++f]=a;g[++f]=e;g[++f]=b[4];g[++f]=b[5];g[++f]=c;g[++f]=d;g[++f]=a;g[++f]=e;g[++f]=b[6];g[++f]=b[7];g[++f]=c;g[++f]=d;g[++f]=a;g[++f]=e},multiplyAlpha:function(a){this._stateList.alpha*=a},setBlendMode:function(a){this._stateList.blendMode=a},applyScissor:function(a,b,c,d){var e=this._stateList,f=P._scratchQuadArray;f[0]=a;f[1]=b;f[2]=a+c;f[3]=b+d;e.matrix.transformArray(f,
4,f);this._inverseProjection.transformArray(f,4,f);a=f[0];b=f[1];c=f[2]-a;d=f[3]-b;0>c&&(a+=c,c=-c);0>d&&(b+=d,d=-d);e.applyScissor(a,b,c,d)},willRender:function(){this._batcher.willRender()},didRender:function(){this._batcher.didRender()},onResize:function(a,b){this._stateList=new Xa;var c;c=null!=this._renderTarget?-1:1;this._stateList.matrix.set(2/a,0,0,-2*c/b,-1,c);this._inverseProjection=new S;this._inverseProjection.set(2/a,0,0,2/b,-1,-1);this._inverseProjection.invert()},transformQuad:function(a,
b,c,d){var c=a+c,d=b+d,e=P._scratchQuadArray;e[0]=a;e[1]=b;e[2]=c;e[3]=b;e[4]=c;e[5]=d;e[6]=a;e[7]=d;this._stateList.matrix.transformArray(e,8,e);return e},__class__:P};var Xa=function(){this.scissor=this.prev=this.next=null;this.matrix=new S;this.alpha=1;this.blendMode=C.Normal};Xa.__name__=!0;Xa.prototype={applyScissor:function(a,b,c,d){if(null!=this.scissor)var e=L.max(this.scissor.x,a),f=L.max(this.scissor.y,b),c=L.min(this.scissor.x+this.scissor.width,a+c),d=L.min(this.scissor.y+this.scissor.height,
b+d),a=e,b=f,c=c-e,d=d-f;else this.scissor=new sa;this.scissor.set(Math.round(a),Math.round(b),Math.round(c),Math.round(d))},__class__:Xa};var Ia=function(a,b){var c=this;this._hasGPU=new I(!0);this.gl=b;b.canvas.addEventListener("webglcontextlost",function(a){a.preventDefault();c._hasGPU.set__(!1)},!1);b.canvas.addEventListener("webglcontextrestore",function(){c.init();c._hasGPU.set__(!0)},!1);a.resize.connect(U(this,this.onResize));this.init()};Ia.__name__=!0;Ia.__interfaces__=[ya];Ia.prototype=
{get_type:function(){return N.WebGL},createTextureFromImage:function(a){if(this.gl.isContextLost())return null;var b=new ea(this,a.width,a.height);b.uploadImageData(a);return b.createTexture(a.width,a.height)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(){this.gl.isContextLost();return null},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},onResize:function(){var a=this.gl.canvas.width,b=this.gl.canvas.height;this.batcher.resizeBackbuffer(a,
b);this.graphics.onResize(a,b)},init:function(){this.batcher=new Db(this.gl);this.graphics=new P(this.batcher,null);this.onResize()},__class__:Ia};var Ya=function(a,b,c){T.call(this,a,b,c)};Ya.__name__=!0;Ya.__super__=T;Ya.prototype=l(T.prototype,{__class__:Ya});var ea=function(a,b,c){this.framebuffer=this._graphics=null;this._disposed=!1;this._renderer=a;this.width=L.max(2,Bb.nextPowerOfTwo(b));this.height=L.max(2,Bb.nextPowerOfTwo(c));b=a.gl;this.nativeTexture=b.createTexture();a.batcher.bindTexture(this.nativeTexture);
b.texParameteri(3553,10242,33071);b.texParameteri(3553,10243,33071);b.texParameteri(3553,10240,9729);b.texParameteri(3553,10241,9728)};ea.__name__=!0;ea.__interfaces__=[Qb];ea.drawBorder=function(a,b,c){var d=a.getContext("2d");d.drawImage(a,b-1,0,1,c,b,0,1,c);d.drawImage(a,0,c-1,b,1,0,c,b,1)};ea.__super__=x;ea.prototype=l(x.prototype,{createTexture:function(a,b){return new Ya(this,a,b)},uploadImageData:function(a){if(this.width!=a.width||this.height!=a.height){var b=j.createEmptyCanvas(this.width,
this.height);b.getContext("2d").drawImage(a,0,0);ea.drawBorder(b,a.width,a.height);a=b}this._renderer.batcher.bindTexture(this.nativeTexture);this._renderer.gl.texImage2D(3553,0,6408,6408,5121,a)},onDisposed:function(){var a=this._renderer.batcher;a.deleteTexture(this);null!=this.framebuffer&&a.deleteFramebuffer(this);this._graphics=this.framebuffer=this.nativeTexture=null},__class__:ea});var G=function(a,b,c){c="#ifdef GL_ES\nprecision mediump float;\n#endif\n"+c;this._gl=a;this._program=a.createProgram();
a.attachShader(this._program,G.createShader(a,35633,b));a.attachShader(this._program,G.createShader(a,35632,c));a.linkProgram(this._program);a.useProgram(this._program)};G.__name__=!0;G.createShader=function(a,b,c){b=a.createShader(b);a.shaderSource(b,c);a.compileShader(b);return b};G.prototype={useProgram:function(){this._gl.useProgram(this._program)},prepare:function(){null},getAttribLocation:function(a){return this._gl.getAttribLocation(this._program,a)},getUniformLocation:function(a){return this._gl.getUniformLocation(this._program,
a)},__class__:G};var Va=function(a){G.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}","varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nuniform mediump vec4 u_region;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, u_region.xy + mod(v_uv, u_region.zw)) * v_alpha;\n}");
this.a_pos=this.getAttribLocation("a_pos");this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.u_region=this.getUniformLocation("u_region");this.setTexture(0)};Va.__name__=!0;Va.__super__=G;Va.prototype=l(G.prototype,{setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},setRegion:function(a,b,c,d){this._gl.uniform4f(this.u_region,a,b,c,d)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);
this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,20,16)},__class__:Va});var Ua=function(a){G.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}",
"varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, v_uv) * v_alpha;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.setTexture(0)};Ua.__name__=!0;Ua.__super__=G;Ua.prototype=l(G.prototype,{setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);
this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,20,16)},__class__:Ua});var Wa=function(a){G.call(this,a,"attribute highp vec2 a_pos;\nattribute lowp vec3 a_rgb;\nattribute lowp float a_alpha;\nvarying lowp vec4 v_color;\nvoid main (void) {\nv_color = vec4(a_rgb*a_alpha, a_alpha);\ngl_Position = vec4(a_pos, 0, 1);\n}",
"varying lowp vec4 v_color;\nvoid main (void) {\ngl_FragColor = v_color;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_rgb=this.getAttribLocation("a_rgb");this.a_alpha=this.getAttribLocation("a_alpha")};Wa.__name__=!0;Wa.__super__=G;Wa.prototype=l(G.prototype,{prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_rgb);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,24,0);this._gl.vertexAttribPointer(this.a_rgb,
3,5126,!1,24,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,24,20)},__class__:Wa});var Za=function(){this._transitor=null;this.scenes=[];this.occludedScenes=[];this._root=new D};Za.__name__=!0;Za.__super__=q;Za.prototype=l(q.prototype,{get_name:function(){return"Director_4"},pushScene:function(a,b){var c=this;this.completeTransition();var d=this.get_topScene();null!=d?this.playTransition(d,a,b,function(){c.hide(d)}):(this.add(a),this.invalidateVisibility())},unwindToScene:function(a,b){var c=
this;this.completeTransition();var d=this.get_topScene();if(null!=d){if(d!=a){for(this.scenes.pop();0<this.scenes.length&&this.scenes[this.scenes.length-1]!=a;)this.scenes.pop().dispose();this.playTransition(d,a,b,function(){c.hideAndDispose(d)})}}else this.pushScene(a,b)},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.completeTransition();for(var a=0,b=this.scenes;a<b.length;){var c=b[a];++a;c.dispose()}this.scenes=[];this.occludedScenes=[];this._root.dispose()},onUpdate:function(a){null!=
this._transitor&&this._transitor.update(a)&&this.completeTransition()},get_topScene:function(){var a=this.scenes.length;return 0<a?this.scenes[a-1]:null},add:function(a){var b=this.get_topScene();null!=b&&this._root.removeChild(b);u.remove(this.scenes,a);this.scenes.push(a);this._root.addChild(a)},hide:function(a){a=a._compMap.Scene_3;null!=a&&a.hidden.emit()},hideAndDispose:function(a){this.hide(a);a.dispose()},show:function(a){a=a._compMap.Scene_3;null!=a&&a.shown.emit()},invalidateVisibility:function(){for(var a=
this.scenes.length;0<a;){var b=this.scenes[--a]._compMap.Scene_3;if(null==b||b.opaque)break}this.occludedScenes=0<this.scenes.length?this.scenes.slice(a,this.scenes.length-1):[];a=this.get_topScene();null!=a&&this.show(a)},completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),this._transitor=null,this.invalidateVisibility())},playTransition:function(a,b,c,d){this.completeTransition();this.add(b);null!=c?(this.occludedScenes.push(a),this._transitor=new Eb(a,b,c,d),this._transitor.init(this)):
(d(),this.invalidateVisibility())},__class__:Za});var Eb=function(a,b,c,d){this._from=a;this._to=b;this._transition=c;this._onComplete=d};Eb.__name__=!0;Eb.prototype={init:function(a){this._transition.init(a,this._from,this._to)},update:function(a){return this._transition.update(a)},complete:function(){this._transition.complete();this._onComplete()},__class__:Eb};var na=function(a){null==a&&(a=!0);this.opaque=a;this.shown=new da;this.hidden=new da};na.__name__=!0;na.__super__=q;na.prototype=l(q.prototype,
{get_name:function(){return"Scene_3"},__class__:na});var oa=function(){};oa.__name__=!0;oa.prototype={__class__:oa};var $a=function(a){this._fn=a};$a.__name__=!0;$a.__interfaces__=[oa];$a.prototype={update:function(){this._fn();return 0},__class__:$a};var ab=function(a){this._duration=a;this._elapsed=0};ab.__name__=!0;ab.__interfaces__=[oa];ab.prototype={update:function(a){this._elapsed+=a;if(this._elapsed>=this._duration){var b=this._elapsed-this._duration;this._elapsed=0;return a-b}return-1},__class__:ab};
var bb=function(a,b){null==b&&(b=-1);this._action=a;this._remaining=this._count=b};bb.__name__=!0;bb.__interfaces__=[oa];bb.prototype={update:function(a,b){if(0==this._count)return 0;var c=this._action.update(a,b);return 0<this._count&&0<=c&&0==--this._remaining?(this._remaining=this._count,c):-1},__class__:bb};var cb=function(){this.stopAll()};cb.__name__=!0;cb.__super__=q;cb.prototype=l(q.prototype,{get_name:function(){return"Script_1"},run:function(a){a=new db(a);this._handles.push(a);return a},
stopAll:function(){this._handles=[]},onUpdate:function(a){for(var b=0;b<this._handles.length;){var c=this._handles[b];c.removed||0<=c.action.update(a,this.owner)?this._handles.splice(b,1):++b}},__class__:cb});var db=function(a){this.removed=!1;this.action=a};db.__name__=!0;db.__interfaces__=[R];db.prototype={dispose:function(){this.removed=!0;this.action=null},__class__:db};var eb=function(a){this._idx=0;this._runningActions=null!=a?a.slice():[]};eb.__name__=!0;eb.__interfaces__=[oa];eb.prototype=
{update:function(a,b){for(var c=0;;){var d=this._runningActions[this._idx];if(null!=d)if(d=d.update(a-c,b),0<=d)c+=d;else return-1;++this._idx;if(this._idx>=this._runningActions.length){this._idx=0;break}else if(c>a)return-1}return c},__class__:eb};var N={__ename__:!0,__constructs__:["Stage3D","WebGL","Canvas"],Stage3D:["Stage3D",0]};N.Stage3D.toString=i;N.Stage3D.__enum__=N;N.WebGL=["WebGL",1];N.WebGL.toString=i;N.WebGL.__enum__=N;N.Canvas=["Canvas",2];N.Canvas.toString=i;N.Canvas.__enum__=N;var Mb=
function(){};Mb.__name__=!0;Mb.that=function(){};var Oa=function(){this.success=new r;this.error=new r;this.progressChanged=new da;this.hasResult=!1;this._total=this._progress=0};Oa.__name__=!0;Oa.prototype={set_result:function(a){if(this.hasResult)throw"Promise result already assigned";this._result=a;this.hasResult=!0;this.success.emit(a);return a},get:function(a){return this.hasResult?(a(this._result),null):this.success.connect(a).once()},set_progress:function(a){this._progress!=a&&(this._progress=
a,this.progressChanged.emit());return a},set_total:function(a){this._total!=a&&(this._total=a,this.progressChanged.emit());return a},__class__:Oa};var da=function(a){w.call(this,a)};da.__name__=!0;da.__super__=w;da.prototype=l(w.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(){var a=this;this._head==w.DISPATCHING_SENTINEL?this.defer(function(){a.emitImpl()}):this.emitImpl()},emitImpl:function(){for(var a=this.willEmit(),b=a;null!=b;)b._listener(),b.stayInList||
b.dispose(),b=b._next;this.didEmit(a)},__class__:da});var ob=function(a){this.next=null;this.fn=a};ob.__name__=!0;ob.prototype={__class__:ob};var E=function(){};E.__name__=!0;E.getFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?u.substr(a,b+1,null):null};E.removeFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?u.substr(a,0,b):a};E.getUrlExtension=function(a){var b=a.lastIndexOf("?");0<=b&&(a=u.substr(a,0,b));b=a.lastIndexOf("/");0<=b&&(a=u.substr(a,b+1,null));return E.getFileExtension(a)};
E.joinPath=function(a,b){0<a.length&&47!=a.charCodeAt(a.length-1)&&(a+="/");return a+b};E.withFields=function(a,b){var c=b.length;if(0<c){for(var a=0<a.length?a+" [":a+"[",d=0;d<c;){0<d&&(a+=", ");var e=b[d],f=b[d+1];if(H.is(f,Error)){var g=f.stack;null!=g&&(f=g)}a+=e+"="+H.string(f);d+=2}a+="]"}return a};var Fb=function(a){this.url=a;this.headers=new Da;this.params=new Da;this.async=!0};Fb.__name__=!0;Fb.prototype={addParameter:function(a,b){this.params.push({param:a,value:b});return this},request:function(a){var b=
this;b.responseData=null;var c=this.req=Rb.createXMLHttpRequest(),d=function(){if(4==c.readyState){var a;try{a=c.status}catch(d){a=null}void 0==a&&(a=null);if(null!=a)b.onStatus(a);if(null!=a&&200<=a&&400>a)b.req=null,b.onData(b.responseData=c.responseText);else if(null==a)b.req=null,b.onError("Failed to connect or resolve host");else switch(a){case 12029:b.req=null;b.onError("Failed to connect to host");break;case 12007:b.req=null;b.onError("Unknown host");break;default:b.req=null,b.responseData=
c.responseText,b.onError("Http Error #"+c.status)}}};this.async&&(c.onreadystatechange=d);var e=this.postData;if(null!=e)a=!0;else for(var f=this.params.iterator();f.hasNext();)var g=f.next(),e=null==e?"":e+"&",e=e+(encodeURIComponent(g.param)+"="+encodeURIComponent(g.value));try{if(a)c.open("POST",this.url,this.async);else if(null!=e){var i=1>=this.url.split("?").length;c.open("GET",this.url+(i?"?":"&")+e,this.async);e=null}else c.open("GET",this.url,this.async)}catch(j){b.req=null;this.onError(j.toString());
return}!fa.exists(this.headers,function(a){return"Content-Type"==a.header})&&a&&null==this.postData&&c.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(a=this.headers.iterator();a.hasNext();)f=a.next(),c.setRequestHeader(f.header,f.value);c.send(e);this.async||d(null)},onData:function(){},onError:function(){},onStatus:function(){},__class__:Fb};var V=function(){this.h={}};V.__name__=!0;V.__interfaces__=[Ib];V.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},
exists:function(a){return this.h.hasOwnProperty(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},__class__:V};var Z=function(){this.h={}};Z.__name__=!0;Z.__interfaces__=[Ib];Z.prototype={set:function(a,b){this.h["$"+a]=b},get:function(a){return this.h["$"+a]},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b.substr(1));return u.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},
next:function(){return this.ref["$"+this.it.next()]}}},__class__:Z};var Lb=function(){};Lb.__name__=!0;Lb.getType=function(a){a=a.__meta__;return null==a||null==a.obj?{}:a.obj};var B=function(){};B.__name__=!0;B.getClass=function(a){return a instanceof Array&&null==a.__enum__?Array:a.__class__};B.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;if("function"==c&&(a.__name__||a.__ename__))c="object";switch(c){case "object":if(a instanceof Array){if(a.__enum__){if(2==
a.length)return a[0];for(var c=a[0]+"(",b=b+"\t",d=2,e=a.length;d<e;)var f=d++,c=2!=f?c+(","+B.__string_rec(a[f],b)):c+B.__string_rec(a[f],b);return c+")"}c=a.length;d="[";b+="\t";for(e=0;e<c;)f=e++,d+=(0<f?",":"")+B.__string_rec(a[f],b);return d+"]"}try{d=a.toString}catch(g){return"???"}if(null!=d&&d!=Object.toString&&(c=a.toString(),"[object Object]"!=c))return c;c=null;d="{\n";b+="\t";e=null!=a.hasOwnProperty;for(c in a)if(!e||a.hasOwnProperty(c))"prototype"==c||"__class__"==c||"__super__"==c||
"__interfaces__"==c||"__properties__"==c||(2!=d.length&&(d+=", \n"),d+=b+c+" : "+B.__string_rec(a[c],b));b=b.substring(1);return d+("\n"+b+"}");case "function":return"<function>";case "string":return a;default:return""+a}};B.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,e=c.length;d<e;){var f=d++,f=c[f];if(f==b||B.__interfLoop(f,b))return!0}return B.__interfLoop(a.__super__,b)};B.__instanceof=function(a,b){if(null==b)return!1;switch(b){case Yb:return(a|
0)===a;case Vb:return"number"==typeof a;case Wb:return"boolean"==typeof a;case String:return"string"==typeof a;case Array:return a instanceof Array&&null==a.__enum__;case Zb:return!0;default:if(null!=a){if("function"==typeof b&&(a instanceof b||B.__interfLoop(B.getClass(a),b)))return!0}else return!1;return b==$b&&null!=a.__name__||b==ac&&null!=a.__ename__?!0:a.__enum__==b}};var Rb=function(){};Rb.__name__=!0;Rb.createXMLHttpRequest=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;
if("undefined"!=typeof ActiveXObject)return new ActiveXObject("Microsoft.XMLHTTP");throw"Unable to create XMLHttpRequest object.";};var Kb=function(){};Kb.__name__=!0;Kb.getContextWebGL=function(a,b){for(var c=0,d=["webgl","experimental-webgl"];c<d.length;){var e=d[c];++c;e=a.getContext(e,b);if(null!=e)return e}return null};var Gb=function(a){this.pack=a};Gb.__name__=!0;Gb.prototype={getPack:function(){return this.pack},__class__:Gb};var t=function(){};t.__name__=!0;t.main=function(){k.init();t.mainEntity=
new D;t.mainEntity.add(new m);k._platform.getStage().resize.connect(t.onResize);var a=K.fromAssets("content");k._platform.loadAssetPack(a).get(t.onSuccess)};t.onSuccess=function(a){t.ctx=new Gb(a);a=new La(0,k._platform.getStage().get_width(),k._platform.getStage().get_height());k.root.add(t.director);t.serverStatus=new fb;t.mainEntity.add(new gb(t.ctx));t.mainEntity.add(t.serverStatus);t.mainEntity.add(a);t.director.unwindToScene(t.mainEntity)};t.onResize=function(){var a=L.min(k._platform.getStage().get_width()/
640,k._platform.getStage().get_height()/480);1<a&&(a=1);t.mainEntity._compMap.Sprite_2.setScale(a).setXY((k._platform.getStage().get_width()-640*a)/2,(k._platform.getStage().get_height()-480*a)/2)};var gb=function(a){na.call(this);this.ctx=a};gb.__name__=!0;gb.__super__=na;gb.prototype=l(na.prototype,{onAdded:function(){this.owner.addChild(Sb.getBackground(this.ctx));this.owner.addChild(Tb.getRocket(this.ctx));this.owner.addChild(Ba.getBigButton(this.ctx,"Give me a push!",k._platform.getStage().get_width()/
2,k._platform.getStage().get_height()-64,y.Center));this.owner.addChild(Ba.getImageButton(this.ctx.getPack().getTexture("ui/solarsystem_button_normal"),this.ctx.getPack().getTexture("ui/solarsystem_button_hover"),k._platform.getStage().get_width()-108,4,y.Left));this.owner.addChild(Ba.getImageButton(this.ctx.getPack().getTexture("ui/ranking_button_normal"),this.ctx.getPack().getTexture("ui/ranking_button_hover"),k._platform.getStage().get_width()-56,4,y.Left));this.owner.addChild(Q.getRocketStatusField(this.ctx,
8,8))},__class__:gb});var Hb=function(){this.requestCompleteSignal=new r};Hb.__name__=!0;Hb.prototype={getRocketStatus:function(){var a=this,b=new Fb("https://seginus-scores.herokuapp.com/api/MailboxMayhem/Highscores/");b.addParameter("myVar","myValue");b.addParameter("userName","Mark");b.onError=function(b){a.requestCompleteSignal.emit(b)};b.onStatus=function(b){a.requestCompleteSignal.emit(null==b?"null":""+b)};b.onData=function(b){a.requestCompleteSignal.emit(b)};b.request();b.request(!0)},__class__:Hb};
var hb=function(){this.estimatedTravelTime=this.velocity=this.distanceTraveled=this.pushes=this.prevEstimatedTravelTime=this.prevVelocity=this.prevDistanceTraveled=0;this.nextDestination=""};hb.__name__=!0;hb.prototype={__class__:hb};var fb=function(){this.requestHandler=null;this.requestInterval=1;this.prevRocketData=null;this.rocketDataSignal=new r;this.prevRocketData=new hb;this.prevRocketData.nextDestination="Jupiter";this.prevRocketData.distanceTraveled=34507599;this.prevRocketData.estimatedTravelTime=
53280;this.prevRocketData.prevEstimatedTravelTime=53280;this.prevRocketData.prevVelocity=17;this.prevRocketData.velocity=17;this.prevRocketData.pushes=0;this.requestHandler=new Hb;this.requestHandler.requestCompleteSignal.connect(U(this,this.testUpdateData))};fb.__name__=!0;fb.__super__=q;fb.prototype=l(q.prototype,{get_name:function(){return"ServerStatus_0"},onAdded:function(){var a=this,b=new cb;b.run(new bb(new eb([new ab(this.requestInterval),new $a(function(){a.updateRocket()})])));this.owner.add(b)},
updateRocket:function(){this.requestHandler.getRocketStatus()},testUpdateData:function(a){var b=new hb;b.nextDestination=a;b.velocity=this.prevRocketData.prevVelocity+1;b.distanceTraveled=this.prevRocketData.distanceTraveled+this.prevRocketData.velocity;b.estimatedTravelTime=this.prevRocketData.prevEstimatedTravelTime-1;b.prevVelocity=this.prevRocketData.prevVelocity;b.prevDistanceTraveled=this.prevRocketData.prevDistanceTraveled;b.prevEstimatedTravelTime=this.prevRocketData.prevEstimatedTravelTime;
b.pushes=Math.floor(5*Math.random());this.prevRocketData.prevDistanceTraveled=b.distanceTraveled;this.prevRocketData.prevEstimatedTravelTime=b.estimatedTravelTime;this.prevRocketData.prevVelocity=b.velocity;this.rocketDataSignal.emit(b)},__class__:fb});var ib=function(a){this.grid=this.ctx=null;this.ctx=a};ib.__name__=!0;ib.__super__=q;ib.prototype=l(q.prototype,{get_name:function(){return"RocketStatusFieldControl_6"},onAdded:function(){this.grid=this.owner._compMap.TextGrid_7;this.grid.dimensions(2,
4);this.grid.addText(Q.createText(this.ctx,"Next destination","fonts/myriad_white"),0,0);this.grid.addText(Q.createText(this.ctx,"Jupiter","fonts/myriad_orange"),1,0);this.grid.addText(Q.createText(this.ctx,"Estimated travel time","fonts/myriad_white"),0,1);this.grid.addText(Q.createText(this.ctx,"12d 17h 23min","fonts/myriad_orange"),1,1);this.grid.addText(Q.createText(this.ctx,"Velocity","fonts/myriad_white"),0,2);this.grid.addText(Q.createText(this.ctx,"18 km/s","fonts/myriad_orange"),1,2);this.grid.addText(Q.createText(this.ctx,
"Distance traveled","fonts/myriad_white"),0,3);this.grid.addText(Q.createText(this.ctx,"365 424 662 km","fonts/myriad_orange"),1,3);t.serverStatus.rocketDataSignal.connect(U(this,this.updateView))},updateView:function(a){this.grid.getText(1,0).set_text(null==a.nextDestination?"null":""+a.nextDestination);var b=a.estimatedTravelTime/60,c=b%60,b=b/60,d=b%24,b=Math.round(b/24),d=Math.round(d),c=Math.round(c);this.grid.getText(1,1).set_text(H.string(b+"d "+d+"h "+c+"min"));this.grid.getText(1,2).set_text((null==
a.velocity?"null":""+a.velocity)+" km/s");this.grid.getText(1,3).set_text((null==a.distanceTraveled?"null":""+a.distanceTraveled)+" km")},__class__:ib});var Tb=function(){};Tb.__name__=!0;Tb.getRocket=function(a){var b=new D,a=new X(a.getPack().getTexture("rocket"));a.centerAnchor();a.x.set__(k._platform.getStage().get_width()/2);a.y.set__(k._platform.getStage().get_height()/2);b.add(a);return b};var Sb=function(){};Sb.__name__=!0;Sb.getBackground=function(a){for(var b=new D,c=[],d=0;2>d;){var e=
d++,f=new D,g=new X(a.getPack().getTexture("starspace"));g.setXY(g.getNaturalWidth()*e,0);c.push(g);f.add(g);b.addChild(f)}a=new jb(c,60);b.add(a);return b};var jb=function(a,b){this.sprites=[];this.sprites=a;this.speed=new v(b)};jb.__name__=!0;jb.__super__=q;jb.prototype=l(q.prototype,{get_name:function(){return"ScrollImage_8"},onUpdate:function(a){this.speed.update(a);for(var b=0,c=this.sprites.length;b<c;){var d=this.sprites[b++].x;d.set__(d._value-a*this.speed._value)}this.sprites[0].x._value<
-this.sprites[0].getNaturalWidth()&&this.sprites[0].x.set__(this.sprites[1].x._value+this.sprites[1].getNaturalWidth());this.sprites[1].x._value<-this.sprites[1].getNaturalWidth()&&this.sprites[1].x.set__(this.sprites[0].x._value+this.sprites[0].getNaturalWidth())},__class__:jb});var y={__ename__:!0,__constructs__:["Left","Center","Right"],Left:["Left",0]};y.Left.toString=i;y.Left.__enum__=y;y.Center=["Center",1];y.Center.toString=i;y.Center.__enum__=y;y.Right=["Right",2];y.Right.toString=i;y.Right.__enum__=
y;var Ba=function(){};Ba.__name__=!0;Ba.getBigButton=function(a,b,c,d,e){var f=new D,g=new Ca(a.getPack().getTexture("ui/bigbutton_normal"),a.getPack().getTexture("ui/bigbutton_hover"),a.getPack().getTexture("ui/bigbutton_click"));g.get_pointerOut().connect(function(){null});g.get_pointerIn().connect(function(){null});a=new aa(a.getPack(),"fonts/myriad_white");b=new ta(a,b);b.set_align(F.Center);b.setAnchor(0,b.getNaturalHeight()/2);b.setXY(g.x._value+g.getNaturalWidth()/2,g.y._value+g.getNaturalHeight()/
2);f.add(g);a=new D;a.add(b);f.addChild(a);g.setXY(c,d);e==y.Center?g.centerAnchor():e==y.Right&&g.setAnchor(g.getNaturalWidth(),0);return f};Ba.getImageButton=function(a,b,c,d,e){var f=new D,a=new Ca(a,b);f.add(a);a.setXY(c,d);e==y.Center?a.centerAnchor():e==y.Right&&a.setAnchor(a.getNaturalWidth(),0);return f};var Ca=function(a,b,c){this.normalTex=this.hoverTex=this.pressedTex=null;X.call(this,a);this.normalTex=a;this.hoverTex=b;this.pressedTex=c;b=new Ea;b.add(this.get_pointerOut().connect(U(this,
this.onPointerOut)));b.add(this.get_pointerIn().connect(U(this,this.onPointerIn)));this.texture=a};Ca.__name__=!0;Ca.__super__=X;Ca.prototype=l(X.prototype,{onPointerIn:function(){this.texture=this.hoverTex},onPointerOut:function(){this.texture=this.normalTex},__class__:Ca});var Q=function(){};Q.__name__=!0;Q.getRocketStatusField=function(a,b,c){var d=new D,e=new kb,f=new m;d.add(f);f.setXY(b,c);d.add(e);d.add(new ib(a));return d};Q.createText=function(a,b,c){a=new aa(a.getPack(),c);b=new ta(a,b);
b.set_align(F.Left);return b};var kb=function(){this.cellRightSpacing=12;this.columnWidths=null;this.cellHeight=18;this.rows=null};kb.__name__=!0;kb.__super__=q;kb.prototype=l(q.prototype,{get_name:function(){return"TextGrid_7"},onAdded:function(){},resizeCells:function(){for(var a=0,b=this.rows.length;a<b;)for(var c=a++,d=0,e=this.rows[c].length;d<e;){var f=d++;null!=this.rows[c][f]._compMap.Sprite_2&&this.rows[c][f]._compMap.Sprite_2.x.set__(this.getColumnX(f))}},getColumnX:function(a){for(var b=
0,c=0;c<a;)var d=c++,b=b+this.columnWidths[d];return b},dimensions:function(a,b){this.rows=[];this.columnWidths=[];for(var c=0;c<b;){var d=c++;this.rows.push([]);for(var e=0;e<a;){e++;var f=new D;this.owner.addChild(f);this.rows[d].push(f)}}for(c=0;c<a;)c++,this.columnWidths.push(0)},addText:function(a,b,c){this.columnWidths[b]<a.getNaturalWidth()+this.cellRightSpacing&&(this.columnWidths[b]=a.getNaturalWidth()+this.cellRightSpacing);a.setXY(this.getColumnX(b),c*this.cellHeight);this.rows[c][b].add(a);
this.resizeCells()},getText:function(a,b){return this.rows[b][a]._compMap.Sprite_2},__class__:kb});var Xb=0;Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;Math.isFinite=function(a){return isFinite(a)};Math.isNaN=function(a){return isNaN(a)};String.prototype.__class__=String;String.__name__=!0;Array.__name__=!0;Date.prototype.__class__=Date;Date.__name__=["Date"];var Yb={__name__:["Int"]},Zb={__name__:["Dynamic"]},Vb=Number;Vb.__name__=
["Float"];var Wb=Boolean;Wb.__ename__=["Bool"];var $b={__name__:["Class"]},ac={};ga.instance=new ga;w.DISPATCHING_SENTINEL=new la(null,null);k.root=new D;k.uncaughtError=new r;k.hidden=new I(!1);k.volume=new v(1);k._platform=ga.instance;k._calledInit=!1;K.__meta__={obj:{assets:[{content:[{bytes:20237,md5:"398f0b4c1c5ed8e37c42babcfa3cf5de",name:"fonts/myriad_orange.fnt"},{bytes:8484,md5:"e78d0872731ab355add816c0ce4ed56b",name:"fonts/myriad_orange_0.png"},{bytes:19796,md5:"df1ef3e17854367611f9f67104dd5ec9",
name:"fonts/myriad_white.fnt"},{bytes:7220,md5:"5a135dd67e78632f4c88122e2a5ac984",name:"fonts/myriad_white_0.png"},{bytes:1464,md5:"c49089e42ab836204a37e271b0ff52bf",name:"particles/particle.pex"},{bytes:776,md5:"d1d1793073ddc84a85e000e43d018bf3",name:"particles/texture.png"},{bytes:9552,md5:"416bce97a302062b2e7d1229a908d48d",name:"rocket.png"},{bytes:78137,md5:"11a47abfa36503ac5fe89a5e1bda0219",name:"starspace.png"},{bytes:1732,md5:"e98d6808bee8a79de0182eb45bb8d4d1",name:"ui/bigbutton_click.png"},
{bytes:1702,md5:"a361a6e63fe39c9baa4e3e0c65adf9f0",name:"ui/bigbutton_hover.png"},{bytes:1825,md5:"960c4dad251e4e39251c1a8c0f8ec253",name:"ui/bigbutton_normal.png"},{bytes:1346,md5:"7a65b98d8afb4a78d5e92abc530da719",name:"ui/gear_icon.png"},{bytes:1827,md5:"a24d91f79485684c0de269d1aad9ea19",name:"ui/ranking_button_hover.png"},{bytes:1833,md5:"143131a35185bec6fb85f1b7cdd44373",name:"ui/ranking_button_normal.png"},{bytes:2920,md5:"fb7966cd938953fc233065bf37edce1f",name:"ui/solarsystem_button_hover.png"},
{bytes:3052,md5:"128e8614447468def1a847d3bed94ea1",name:"ui/solarsystem_button_normal.png"}],bootstrap:[{bytes:3822,md5:"7942f02ae6cb4d11a04655ba03ea5972",name:"plane.png"}]}]}};K._supportsCrossOrigin=function(){var a;a=0<=window.navigator.userAgent.indexOf("Linux; U; Android")?!1:null!=(new XMLHttpRequest).withCredentials;a||null;return a}();m._scratchPoint=new rb;aa.NEWLINE=new Ma(10);J._sharedEvent=new ub;z._sharedEvent=new vb;ka.CANVAS_TEXTURES=(new W("(iPhone|iPod|iPad)","")).match(window.navigator.userAgent);
n._mediaRefCount=0;n._detectBlobSupport=!0;j.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"];j.SHOULD_HIDE_MOBILE_BROWSER=window.top==window&&(new W("Mobile(/.*)? Safari","")).match(window.navigator.userAgent);s._detectSupport=!0;P._scratchMatrix=new S;t.director=new Za;t.main()})();
